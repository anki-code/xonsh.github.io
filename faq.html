

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Frequently Asked Questions &mdash; xonsh 0.2.7 documentation</title>
    
    <link rel="stylesheet" href="_static/numpy_friendly.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.2.7',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="_static/cloud.js"></script>
    <link rel="shortcut icon" href="_static/magic_conch.ico"/>
    <link rel="top" title="xonsh 0.2.7 documentation" href="index.html" />
    <link rel="next" title="Wishlist &amp; To-Dos" href="todo.html" />
    <link rel="prev" title="Xonsh 0.1 Release Notes" href="previous/0.1_release_notes.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body role="document">
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="todo.html" title="Wishlist &amp; To-Dos"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="previous/0.1_release_notes.html" title="Xonsh 0.1 Release Notes"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">xonsh 0.2.7 documentation</a> &raquo;</li>
 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<p>Ok, so, maybe no one actually asked them.</p>
<div class="section" id="why-xonsh">
<h2>1. Why xonsh?<a class="headerlink" href="#why-xonsh" title="Permalink to this headline">¶</a></h2>
<p>The idea for xonsh first struck while I was reviewing the BASH chapter
(written by my co-author <a class="reference external" href="http://katyhuff.github.io/">Katy Huff</a>)
of <a class="reference external" href="http://physics.codes/">Effective Computation in Physics</a>. In the book,
we spend a bunch of time describing important, but complex ideas, such
as piping. However, we don&#8217;t even touch on more &#8216;basic&#8217; aspects of the BASH
language, such as if-statements or loops. Even though I have been using BASH
for well over a decade, I am not even sure I <em>know how</em>
to add two numbers together in it or consistently create an array. This is
normal.</p>
<p>If the tool is so bad, then maybe we need a new tool. So xonsh is really meant
to solve the problem that other shells don&#8217;t &#8220;fit your brain.&#8221;
In some programming situations this is OK because of what you get
(an optimizing compiler, type safety, provable correctness, register access).
But a shell that doesn&#8217;t fit your brain is only a liability.</p>
<p>Coincidentally, within the week, <a class="reference external" href="http://stephen-brennan.com/2015/01/16/write-a-shell-in-c/">an article floated to the top of Hacker News</a>
that teaches you how to write a shell in C. So I thought, &#8220;It can&#8217;t be
that hard...&#8221;</p>
<p>And thus, <a class="reference external" href="http://exofrills.org">again</a>, I entered the danger zone.</p>
</div>
<div class="section" id="why-not-another-exotic-shell-such-as-fish">
<h2>2. Why not another exotic shell, such as <code class="docutils literal"><span class="pre">fish</span></code>?<a class="headerlink" href="#why-not-another-exotic-shell-such-as-fish" title="Permalink to this headline">¶</a></h2>
<p>While many other alternative shells have an amazing suite of features
as well as much improved syntax of traditional options, none of them
are quite as beautiful as Python.  In xonsh, you get the best of all possible
worlds. A syntax that already fits your brain and any features that you
desire.</p>
</div>
<div class="section" id="why-not-just-use-the-ipython-command-line-interface">
<h2>3. Why not just use the IPython command line interface?<a class="headerlink" href="#why-not-just-use-the-ipython-command-line-interface" title="Permalink to this headline">¶</a></h2>
<p>There are two serious drawbacks to this approach - though, believe me, I have
tried it.</p>
<p>The first is that typing <code class="docutils literal"><span class="pre">!</span></code> before every subprocess command is
extremely tedious.  I think that this is because it is a prefix operator and
thus gets in the way of what you are trying to do right as you start to try
to do it. Making <code class="docutils literal"><span class="pre">!</span></code> a postfix operator could address some of this, but
would probably end up being annoying, though not nearly as jarring.</p>
<p>The second reason is that tab completion of subprocess commands after an <code class="docutils literal"><span class="pre">!</span></code>
does not work. This is a deal breaker for day-to-day use.</p>
</div>
<div class="section" id="so-how-does-this-all-work">
<h2>4. So how does this all work?<a class="headerlink" href="#so-how-does-this-all-work" title="Permalink to this headline">¶</a></h2>
<p>We use <a class="reference external" href="http://www.dabeaz.com/ply/ply.html">PLY</a> to tokenize and parse
xonsh code. This is heavily inspired by how <a class="reference external" href="https://github.com/eliben/pycparser">pycparser</a>
used this PLY. From our parser, we construct an abstract syntax tree (AST)
only using nodes found in the Python <code class="docutils literal"><span class="pre">ast</span></code> standard library module.
This allows us to compile and execute the AST using the normal Python tools.</p>
<p>Of course, xonsh has special builtins, so the proper context
(builtins, globals, and locals) must be set up prior to actually executing
any code. However, the AST can be constructed completely independently of
any context...mostly.</p>
<p>While the grammar of the xonsh language is context-free, it was convenient
to write the executer in a way that is slightly context sensitive. This is
because certain expressions are ambiguous as to whether they belong to
Python-mode or subprocess-mode. For example, most people will look at
<code class="docutils literal"><span class="pre">ls</span> <span class="pre">-l</span></code> and see a listing command.  However, if <code class="docutils literal"><span class="pre">ls</span></code> and <code class="docutils literal"><span class="pre">l</span></code> were
Python variables, this could be transformed to the equivalent (Python)
expressions <code class="docutils literal"><span class="pre">ls</span> <span class="pre">-</span> <span class="pre">l</span></code> or <code class="docutils literal"><span class="pre">ls-l</span></code>.  Neither of which are valid listing
commands.</p>
<p>What xonsh does to overcome such ambiguity is to check if the left-most
name (<code class="docutils literal"><span class="pre">ls</span></code> above) is in the present Python context. If it is, then it takes
the line to be valid xonsh as written. If the left-most name cannot be found,
then xonsh assumes that the left-most name is an external command. It thus
attempts to parse the line after wrapping it in an uncaptured subprocess
call <code class="docutils literal"><span class="pre">$[]</span></code>.  If wrapped version successfully parses, the <code class="docutils literal"><span class="pre">$[]</span></code> version
stays. Otherwise, the original line is retained.</p>
<p>All of the context sensitive parsing occurs as an AST transformation prior to
any code is executed.  This ensures that code will never be partially executed
before failing.</p>
<p>It is critical to note that the context sensitive parsing is a convenience
meant for humans.  If ambiguity remains or exactness is required, simply
manually use the <code class="docutils literal"><span class="pre">$[]</span></code> or <code class="docutils literal"><span class="pre">$()</span></code> operators on your code.</p>
</div>
<div class="section" id="context-sensitive-parsing-is-gross">
<h2>5. Context-sensitive parsing is gross<a class="headerlink" href="#context-sensitive-parsing-is-gross" title="Permalink to this headline">¶</a></h2>
<p>Yes, context-sensitive parsing is gross. But the point of xonsh is that it
is ultimately a lot less gross than other shell languages, such as BASH.
Furthermore, its use is heavily limited here.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="index.html" title="index">
          <img class="logo" src="_static/ascii_conch_part_color_tight.png" alt="Logo"/>
        </a></p><div class="sphinxlocaltoc">
    <h3><a href="index.html">Page contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Frequently Asked Questions</a><ul>
<li><a class="reference internal" href="#why-xonsh">1. Why xonsh?</a></li>
<li><a class="reference internal" href="#why-not-another-exotic-shell-such-as-fish">2. Why not another exotic shell, such as <code class="docutils literal"><span class="pre">fish</span></code>?</a></li>
<li><a class="reference internal" href="#why-not-just-use-the-ipython-command-line-interface">3. Why not just use the IPython command line interface?</a></li>
<li><a class="reference internal" href="#so-how-does-this-all-work">4. So how does this all work?</a></li>
<li><a class="reference internal" href="#context-sensitive-parsing-is-gross">5. Context-sensitive parsing is gross</a></li>
</ul>
</li>
</ul>

  </div>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="previous/0.1_release_notes.html"
                          title="Previous page">&larr; Xonsh 0.1 Release Notes</a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="todo.html"
                          title="Next page">&rarr; Wishlist &amp; To-Dos</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/faq.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="todo.html" title="Wishlist &amp; To-Dos"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="previous/0.1_release_notes.html" title="Xonsh 0.1 Release Notes"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">xonsh 0.2.7 documentation</a> &raquo;</li>
 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Anthony Scopatz.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>