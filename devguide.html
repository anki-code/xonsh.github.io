

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Developer’s Guide &mdash; xonsh 0.1.6 documentation</title>
    
    <link rel="stylesheet" href="_static/numpy_friendly.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="_static/cloud.js"></script>
    <link rel="shortcut icon" href="_static/magic_conch.ico"/>
    <link rel="top" title="xonsh 0.1.6 documentation" href="index.html" />
    <link rel="next" title="Previous Versions" href="previous/index.html" />
    <link rel="prev" title="Pygments Hooks (xonsh.pyghooks)" href="api/pyghooks.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <div class="relbar-top">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="previous/index.html" title="Previous Versions"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="api/pyghooks.html" title="Pygments Hooks (xonsh.pyghooks)"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">xonsh 0.1.6 documentation</a> &raquo;</li>
 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="developer-s-guide">
<span id="devguide"></span><h1>Developer&#8217;s Guide<a class="headerlink" href="#developer-s-guide" title="Permalink to this headline">¶</a></h1>
<p>Welcome to the xonsh developer&#8217;s guide!  This is a place for developers to
place information that does not belong in the user&#8217;s guide or the library
reference but is useful or necessary for the next people that come along to
develop xonsh.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All code changes must go through the pull request review procedure.</p>
</div>
<div class="section" id="style-guide">
<h2>Style Guide<a class="headerlink" href="#style-guide" title="Permalink to this headline">¶</a></h2>
<p>xonsh is a pure Python project, and so we use PEP8 (with some additions) to
ensure consistency throughout the code base.</p>
<div class="section" id="rules-to-write-by">
<h3>Rules to Write By<a class="headerlink" href="#rules-to-write-by" title="Permalink to this headline">¶</a></h3>
<p>It is important to refer to things and concepts by their most specific name.
When writing xonsh code or documentation please use technical terms
appropriately. The following rules help provide needed clarity.</p>
<div class="section" id="interfaces">
<h4>Interfaces<a class="headerlink" href="#interfaces" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>User-facing APIs should be as generic and robust as possible.</li>
<li>Tests belong in the top-level <tt class="docutils literal"><span class="pre">tests</span></tt> directory.</li>
<li>Documentation belongs in the top-level <tt class="docutils literal"><span class="pre">docs</span></tt> directory.</li>
</ul>
</div>
<div class="section" id="expectations">
<h4>Expectations<a class="headerlink" href="#expectations" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Code must have associated tests and adequate documentation.</li>
<li>User-interaction code (such as the Shell class) is hard to test.
Mechanism to test such constructs should be developed over time.</li>
<li>Have <em>extreme</em> empathy for your users.</li>
<li>Be selfish. Since you will be writing tests you will be your first user.</li>
</ul>
</div>
</div>
<div class="section" id="python-style-guide">
<h3>Python Style Guide<a class="headerlink" href="#python-style-guide" title="Permalink to this headline">¶</a></h3>
<p>xonsh uses <a class="reference external" href="http://www.python.org/dev/peps/pep-0008/">PEP8</a> for all Python code. The following rules apply where <a class="reference external" href="http://www.python.org/dev/peps/pep-0008/">PEP8</a>
is open to interpretation.</p>
<ul class="simple">
<li>Use absolute imports (<tt class="docutils literal"><span class="pre">import</span> <span class="pre">xonsh.tools</span></tt>) rather than explicit
relative imports (<tt class="docutils literal"><span class="pre">import</span> <span class="pre">.tools</span></tt>). Implicit relative imports
(<tt class="docutils literal"><span class="pre">import</span> <span class="pre">tools</span></tt>) are never allowed.</li>
<li>Use <tt class="docutils literal"><span class="pre">'single</span> <span class="pre">quotes'</span></tt> for string literals, and
<tt class="docutils literal"><span class="pre">&quot;&quot;&quot;triple</span> <span class="pre">double</span> <span class="pre">quotes&quot;&quot;&quot;</span></tt> for docstrings. Double quotes are allowed to
prevent single quote escaping, e.g. <tt class="docutils literal"><span class="pre">&quot;Y'all</span> <span class="pre">c'mon</span> <span class="pre">o'er</span> <span class="pre">here!&quot;</span></tt></li>
<li>We use sphinx with the numpydoc extension to autogenerate API documentation. Follow
the numpydoc standard for docstrings <a class="reference external" href="https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt">described here</a>.</li>
<li>Simple functions should have simple docstrings.</li>
<li>Lines should be at most 80 characters long. The 72 and 79 character
recommendations from PEP8 are not required here.</li>
<li>All Python code should be compliant with Python 3.4+.  At some
unforeseen date in the future, Python 2.7 support <em>may</em> be supported.</li>
<li>Tests should be written with nose using a procedural style. Do not use
unittest directly or write tests in an object-oriented style.</li>
<li>Test generators make more dots and the dots must flow!</li>
</ul>
</div>
</div>
<div class="section" id="how-to-test">
<h2>How to Test<a class="headerlink" href="#how-to-test" title="Permalink to this headline">¶</a></h2>
<p>First, install nose: <a class="reference external" href="http://nose.readthedocs.org/en/latest/">http://nose.readthedocs.org/en/latest/</a></p>
<p>To perform all unit tests:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cd tests/
$ nosetests
</pre></div>
</div>
<p>This will recursively look through the currently directory, open up every file
named test_* and run every function (or method) named test_*.</p>
<p>Nosetests can also take file(s) as an argument. For example, to run just the
lexer and parser module tests:</p>
<div class="highlight-python"><div class="highlight"><pre>$ nosetests test_lexer.py test_parser.py
</pre></div>
</div>
<p>Happy testing!</p>
</div>
<div class="section" id="how-to-document">
<h2>How to Document<a class="headerlink" href="#how-to-document" title="Permalink to this headline">¶</a></h2>
<p>Documentation takes many forms. This will guide you through the steps of
successful documentation.</p>
<div class="section" id="docstrings">
<h3>Docstrings<a class="headerlink" href="#docstrings" title="Permalink to this headline">¶</a></h3>
<p>No matter what language you are writing in, you should always have
documentation strings along with you code. This is so important that it is
part of the style guide.  When writing in Python, your docstrings should be
in reStructured Text using the numpydoc format.</p>
</div>
<div class="section" id="auto-documentation-hooks">
<h3>Auto-Documentation Hooks<a class="headerlink" href="#auto-documentation-hooks" title="Permalink to this headline">¶</a></h3>
<p>The docstrings that you have written will automatically be connected to the
website, once the appropriate hooks have been setup.  At this stage, all
documentation lives within xonsh&#8217;s top-level <tt class="docutils literal"><span class="pre">docs</span></tt> directory.
We uses the sphinx tool to manage and generate the documentation, which
you can learn about from <a class="reference external" href="http://sphinx-doc.org/">the sphinx website</a>.
If you want to generate the documentation, first xonsh itself must be installed
and then you may run the following command from the <tt class="docutils literal"><span class="pre">docs</span></tt> dir:</p>
<div class="highlight-bash"><div class="highlight"><pre>~/xonsh/docs <span class="nv">$ </span>make html
</pre></div>
</div>
<p>For each new
module, you will have to supply the appropriate hooks. This should be done the
first time that the module appears in a pull request.  From here, call the
new module <tt class="docutils literal"><span class="pre">mymod</span></tt>.  The following explains how to add hooks.</p>
</div>
<div class="section" id="python-hooks">
<h3>Python Hooks<a class="headerlink" href="#python-hooks" title="Permalink to this headline">¶</a></h3>
<p>Python documentation lives in the <tt class="docutils literal"><span class="pre">docs/api</span></tt> directory.
First, create a file in this directory that represents the new module called
<tt class="docutils literal"><span class="pre">mymod.rst</span></tt>.
The <tt class="docutils literal"><span class="pre">docs/api</span></tt> directory matches the structure of the <tt class="docutils literal"><span class="pre">xonsh/</span></tt> directory.
So if your module is in a sub-package, you&#8217;ll need to go into the sub-package&#8217;s
directory before creating <tt class="docutils literal"><span class="pre">mymod.rst</span></tt>.
The contents of this file should be as follows:</p>
<p><strong>mymod.rst:</strong></p>
<div class="highlight-rst"><div class="highlight"><pre><span class="p">..</span> <span class="nt">_xonsh_mymod:</span>

<span class="gh">=======================================</span>
<span class="gh">My Awesome Module -- :mod:`xonsh.mymod`</span>
<span class="gh">=======================================</span>

<span class="p">..</span> <span class="ow">currentmodule</span><span class="p">::</span> xonsh.mymod

<span class="p">..</span> <span class="ow">automodule</span><span class="p">::</span> xonsh.mymod
    <span class="nc">:members:</span>
</pre></div>
</div>
<p>This will discover all of the docstrings in <tt class="docutils literal"><span class="pre">mymod</span></tt> and create the
appropriate webpage. Now, you need to hook this page up to the rest of the
website.</p>
<p>Go into the <tt class="docutils literal"><span class="pre">index.rst</span></tt> file in <tt class="docutils literal"><span class="pre">docs/xonsh</span></tt> or other subdirectory and add
<tt class="docutils literal"><span class="pre">mymod</span></tt> to the appropriate <tt class="docutils literal"><span class="pre">toctree</span></tt> (which stands for table-of-contents
tree). Note that every sub-package has its own <tt class="docutils literal"><span class="pre">index.rst</span></tt> file.</p>
</div>
</div>
<div class="section" id="building-the-website">
<h2>Building the Website<a class="headerlink" href="#building-the-website" title="Permalink to this headline">¶</a></h2>
<p>Building the website/documentation requires the following dependencies:</p>
<ol class="arabic simple">
<li><a class="reference external" href="http://sphinx-doc.org/">Sphinx</a></li>
<li><a class="reference external" href="https://pythonhosted.org/cloud_sptheme/cloud_theme.html">Cloud Sphinx Theme</a></li>
</ol>
<div class="section" id="procedure-for-modifying-the-website">
<h3>Procedure for modifying the website<a class="headerlink" href="#procedure-for-modifying-the-website" title="Permalink to this headline">¶</a></h3>
<p>The xonsh website source files are located in the <tt class="docutils literal"><span class="pre">docs</span></tt> directory.
A developer first makes necessary changes, then rebuilds the website locally
by executing the command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ make html
</pre></div>
</div>
<p>This will generate html files for the website in the <tt class="docutils literal"><span class="pre">_build/html/</span></tt> folder.
The developer may view the local changes by opening these files with their
favorite browser, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre>$ google-chrome _build/html/index.html
</pre></div>
</div>
<p>Once the developer is satisfied with the changes, the changes should be
committed and pull-requested per usual. Once the pull request is accepted, the
developer can push their local changes directly to the website by:</p>
<div class="highlight-python"><div class="highlight"><pre>$ make push-root
</pre></div>
</div>
</div>
</div>
<div class="section" id="branches-and-releases">
<h2>Branches and Releases<a class="headerlink" href="#branches-and-releases" title="Permalink to this headline">¶</a></h2>
<p>Mainline xonsh development occurs on the <tt class="docutils literal"><span class="pre">master</span></tt> branch. Other branches
may be used for feature development (topical branches) or to represent
past and upcoming releases.</p>
<p>All releases should have a release candidate (&#8216;-rc1&#8217;) that comes out 2 - 5 days
prior to the scheduled release.  During this time, no changes should occur to
a special release branch (&#8216;vX.X.X-release&#8217;).</p>
<p>The release branch is there so that development can continue on the
develop branch while the release candidates (rc) are out and under review.
This is because otherwise any new developments would have to wait until
post-release to be merged into develop to prevent them from accidentally
getting released early.</p>
<p>As such, the &#8216;vX.X.X-release&#8217; branch should only exist while there are
release candidates out.  They are akin to a temporary second level of staging,
and so everything that is in this branch should also be part of master.</p>
<p>Every time a new release candidate comes out the vX.X.X-release should be
tagged with the name &#8216;X.X.X-rcX&#8217;.  There should be a 2 - 5 day period of time
in between release candidates.  When the full and final release happens, the
&#8216;vX.X.X-release&#8217; branch is merged into master and then deleted.</p>
<p>If you have a new fix that needs to be in the next release candidate, you
should make a topical branch and then pull request it into the release branch.
After this has been accepted, the topical branch should be merged with
master as well.</p>
<p>The release branch must be quiet and untouched for 2 - 5 days prior to the
full release.</p>
<p>The release candidate procedure here only applies to major and minor releases.
Micro releases may be pushed and released directly without having a release
candidate.</p>
<div class="section" id="checklist">
<h3>Checklist<a class="headerlink" href="#checklist" title="Permalink to this headline">¶</a></h3>
<p>When releasing xonsh, make sure to do the following items in order:</p>
<ol class="arabic simple">
<li>Review <strong>ALL</strong> issues in the issue tracker, reassigning or closing them as
needed.</li>
<li>Ensure that all issues in this release&#8217;s milestone have been closed. Moving issues
to the next release&#8217;s milestone is a perfectly valid strategy for
completing this milestone.</li>
<li>Perform maintenance tasks for this project, see below.</li>
<li>Write and commit the release notes.</li>
<li>Review the current state of documentation and make appropriate updates.</li>
<li>Bump the version (in code, documentation, etc.) and commit the change.</li>
<li>If this is a release candidate, tag the release branch with a name that
matches that of the release:<ul>
<li>If this is the first release candidate, create a release branch called
&#8216;vX.X.X-release&#8217; off of develop.  Tag this branch with the name
&#8216;X.X.X-rc1&#8217;.</li>
<li>If this is the second or later release candidate, tag the release branch
with the name &#8216;X.X.X-rcX&#8217;.</li>
</ul>
</li>
<li>If this is the full and final release (and not a release candidate),
merge the release branch into the master branch.  Next, tag the master
branch with the name &#8216;X.X.X&#8217;. Finally, delete the release branch.</li>
<li>Push the tags upstream</li>
<li>Update release information on the website.</li>
</ol>
</div>
<div class="section" id="maintenance-tasks">
<h3>Maintenance Tasks<a class="headerlink" href="#maintenance-tasks" title="Permalink to this headline">¶</a></h3>
<p>None currently.</p>
</div>
<div class="section" id="performing-the-release">
<h3>Performing the Release<a class="headerlink" href="#performing-the-release" title="Permalink to this headline">¶</a></h3>
<p>To perform the release, run these commands for the following tasks:</p>
<p><strong>pip upload:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>./setup.py sdist upload
</pre></div>
</div>
<p><strong>conda upload:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>rm -f /path/to/conda/conda-bld/src_cache/xonsh.tar.gz
<span class="nv">$ </span>conda build --no-test recipe
<span class="nv">$ </span>conda convert -p all -o /path/to/conda/conda-bld /path/to/conda/conda-bld/linux-64/xonsh-X.X.X-0.tar.bz2
<span class="nv">$ </span>binstar upload /path/to/conda/conda-bld/*/xonsh-X.X.X*.tar.bz2
</pre></div>
</div>
<p><strong>website:</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>docs
<span class="nv">$ </span>make clean html push-root
</pre></div>
</div>
</div>
</div>
<div class="section" id="document-history">
<h2>Document History<a class="headerlink" href="#document-history" title="Permalink to this headline">¶</a></h2>
<p>Portions of this page have been forked from the PyNE documentation,
Copyright 2011-2015, the PyNE Development Team. All rights reserved.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="index.html" title="index">
          <img class="logo" src="_static/ascii_conch_part_color.png" alt="Logo"/>
        </a></p><div class="sphinxlocaltoc">
    <h3><a href="index.html">Page contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Developer&#8217;s Guide</a><ul>
<li><a class="reference internal" href="#style-guide">Style Guide</a><ul>
<li><a class="reference internal" href="#rules-to-write-by">Rules to Write By</a><ul>
<li><a class="reference internal" href="#interfaces">Interfaces</a></li>
<li><a class="reference internal" href="#expectations">Expectations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-style-guide">Python Style Guide</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-test">How to Test</a></li>
<li><a class="reference internal" href="#how-to-document">How to Document</a><ul>
<li><a class="reference internal" href="#docstrings">Docstrings</a></li>
<li><a class="reference internal" href="#auto-documentation-hooks">Auto-Documentation Hooks</a></li>
<li><a class="reference internal" href="#python-hooks">Python Hooks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-the-website">Building the Website</a><ul>
<li><a class="reference internal" href="#procedure-for-modifying-the-website">Procedure for modifying the website</a></li>
</ul>
</li>
<li><a class="reference internal" href="#branches-and-releases">Branches and Releases</a><ul>
<li><a class="reference internal" href="#checklist">Checklist</a></li>
<li><a class="reference internal" href="#maintenance-tasks">Maintenance Tasks</a></li>
<li><a class="reference internal" href="#performing-the-release">Performing the Release</a></li>
</ul>
</li>
<li><a class="reference internal" href="#document-history">Document History</a></li>
</ul>
</li>
</ul>

  </div>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="api/pyghooks.html"
                          title="Previous page">&larr; Pygments Hooks (<tt class="docutils literal"><span class="pre">xonsh.pyghooks</span></tt>)</a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="previous/index.html"
                          title="Next page">&rarr; Previous Versions</a></p>
  </div>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/devguide.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="previous/index.html" title="Previous Versions"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="api/pyghooks.html" title="Pygments Hooks (xonsh.pyghooks)"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">xonsh 0.1.6 documentation</a> &raquo;</li>
 
      </ul>
    </div>
    </div>

    <div class="footer">
        &copy; Copyright 2015, Anthony Scopatz.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>