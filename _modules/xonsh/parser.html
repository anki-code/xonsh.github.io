

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>xonsh.parser &mdash; xonsh 0.2.3 documentation</title>
    
    <link rel="stylesheet" href="../../_static/numpy_friendly.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.2.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="../../_static/cloud.js"></script>
    <link rel="shortcut icon" href="../../_static/magic_conch.ico"/>
    <link rel="top" title="xonsh 0.2.3 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body role="document">
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
    <li><a href="../../index.html">xonsh 0.2.3 documentation</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for xonsh.parser</h1><div class="highlight"><pre>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Implements the xonsh parser.&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">Mapping</span>

<span class="kn">from</span> <span class="nn">ply</span> <span class="kn">import</span> <span class="n">yacc</span>

<span class="kn">from</span> <span class="nn">xonsh</span> <span class="kn">import</span> <span class="n">ast</span>
<span class="kn">from</span> <span class="nn">xonsh.lexer</span> <span class="kn">import</span> <span class="n">Lexer</span>
<span class="kn">from</span> <span class="nn">xonsh.tools</span> <span class="kn">import</span> <span class="p">(</span><span class="n">VER_3_4</span><span class="p">,</span> <span class="n">VER_3_5</span><span class="p">,</span> <span class="n">VER_3_5_1</span><span class="p">,</span>
                         <span class="n">VER_MAJOR_MINOR</span><span class="p">,</span> <span class="n">VER_FULL</span><span class="p">,</span>
                         <span class="n">docstring_by_version</span><span class="p">)</span>


<div class="viewcode-block" id="Location"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Location">[docs]</a><span class="k">class</span> <span class="nc">Location</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Location in a file.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Takes a filename, line number, and optionally a column number.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fname</span> <span class="o">=</span> <span class="n">fname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span> <span class="o">=</span> <span class="n">lineno</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">=</span> <span class="n">column</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;{0}:{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39;:{0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">column</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span>

</div>
<div class="viewcode-block" id="has_elts"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.has_elts">[docs]</a><span class="k">def</span> <span class="nf">has_elts</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tests if x is an AST node with elements.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AST</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&#39;elts&#39;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="ensure_has_elts"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.ensure_has_elts">[docs]</a><span class="k">def</span> <span class="nf">ensure_has_elts</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensures that x is an AST node with elements.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">has_elts</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                      <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                      <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                      <span class="n">col_offset</span><span class="o">=</span><span class="n">col_offset</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span>

</div>
<div class="viewcode-block" id="empty_list"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.empty_list">[docs]</a><span class="k">def</span> <span class="nf">empty_list</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates the AST node for an empty list.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ast</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="p">[],</span> <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="binop"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.binop">[docs]</a><span class="k">def</span> <span class="nf">binop</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates the AST node for a binary operation.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="call_split_lines"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.call_split_lines">[docs]</a><span class="k">def</span> <span class="nf">call_split_lines</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates the AST node for calling the &#39;splitlines&#39; attribute of an</span>
<span class="sd">    object, nominally a string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ast</span><span class="o">.</span><span class="n">Call</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                                       <span class="n">attr</span><span class="o">=</span><span class="s">&#39;splitlines&#39;</span><span class="p">,</span>
                                       <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                                       <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                                       <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">),</span>
                    <span class="n">args</span><span class="o">=</span><span class="p">[],</span>
                    <span class="n">keywords</span><span class="o">=</span><span class="p">[],</span>
                    <span class="n">starargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">kwargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                    <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="ensure_list_from_str_or_list"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.ensure_list_from_str_or_list">[docs]</a><span class="k">def</span> <span class="nf">ensure_list_from_str_or_list</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates the AST node for the following expression::</span>

<span class="sd">        [x] if isinstance(x, str) else x</span>

<span class="sd">    Somewhat useful.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ast</span><span class="o">.</span><span class="n">IfExp</span><span class="p">(</span><span class="n">test</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Call</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">&#39;isinstance&#39;</span><span class="p">,</span>
                                                 <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                                                 <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                                                 <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">),</span>
                                   <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">&#39;str&#39;</span><span class="p">,</span>
                                                     <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                                                     <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                                                     <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">)],</span>
                                   <span class="n">keywords</span><span class="o">=</span><span class="p">[],</span>
                                   <span class="n">starargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                   <span class="n">kwargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                   <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                                   <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">),</span>
                     <span class="n">body</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="p">],</span>
                                   <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                                   <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                                   <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">),</span>
                     <span class="n">orelse</span><span class="o">=</span><span class="n">x</span><span class="p">,</span>
                     <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                     <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="xonsh_call"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.xonsh_call">[docs]</a><span class="k">def</span> <span class="nf">xonsh_call</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates the AST node for calling a function of a given name.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ast</span><span class="o">.</span><span class="n">Call</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                                  <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                                  <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                                  <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">),</span>
                    <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
                    <span class="n">keywords</span><span class="o">=</span><span class="p">[],</span>
                    <span class="n">starargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">kwargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                    <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="xonsh_help"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.xonsh_help">[docs]</a><span class="k">def</span> <span class="nf">xonsh_help</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates the AST node for calling the __xonsh_help__() function.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">xonsh_call</span><span class="p">(</span><span class="s">&#39;__xonsh_help__&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="xonsh_superhelp"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.xonsh_superhelp">[docs]</a><span class="k">def</span> <span class="nf">xonsh_superhelp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates the AST node for calling the __xonsh_superhelp__() function.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">xonsh_call</span><span class="p">(</span><span class="s">&#39;__xonsh_superhelp__&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="xonsh_regexpath"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.xonsh_regexpath">[docs]</a><span class="k">def</span> <span class="nf">xonsh_regexpath</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Creates the AST node for calling the __xonsh_regexpath__() function.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">xonsh_call</span><span class="p">(</span><span class="s">&#39;__xonsh_regexpath__&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="load_ctx"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.load_ctx">[docs]</a><span class="k">def</span> <span class="nf">load_ctx</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Recursively sets ctx to ast.Load()&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&#39;ctx&#39;</span><span class="p">):</span>
        <span class="k">return</span>
    <span class="n">x</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">List</span><span class="p">)):</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">elts</span><span class="p">:</span>
            <span class="n">load_ctx</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Starred</span><span class="p">):</span>
        <span class="n">load_ctx</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="store_ctx"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.store_ctx">[docs]</a><span class="k">def</span> <span class="nf">store_ctx</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Recursively sets ctx to ast.Store()&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&#39;ctx&#39;</span><span class="p">):</span>
        <span class="k">return</span>
    <span class="n">x</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Store</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">List</span><span class="p">)):</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">elts</span><span class="p">:</span>
            <span class="n">store_ctx</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Starred</span><span class="p">):</span>
        <span class="n">store_ctx</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="empty_list_if_newline"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.empty_list_if_newline">[docs]</a><span class="k">def</span> <span class="nf">empty_list_if_newline</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span> <span class="k">else</span> <span class="n">x</span>

</div>
<div class="viewcode-block" id="Parser"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser">[docs]</a><span class="k">class</span> <span class="nc">Parser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A class that parses the xonsh language.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">lexer_optimize</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                 <span class="n">lexer_table</span><span class="o">=</span><span class="s">&#39;xonsh.lexer_table&#39;</span><span class="p">,</span>
                 <span class="n">yacc_optimize</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                 <span class="n">yacc_table</span><span class="o">=</span><span class="s">&#39;xonsh.parser_table&#39;</span><span class="p">,</span>
                 <span class="n">yacc_debug</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="n">outputdir</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        lexer_optimize : bool, optional</span>
<span class="sd">            Set to false when unstable and true when lexer is stable.</span>
<span class="sd">        lexer_table : str, optional</span>
<span class="sd">            Lexer module used when optimized.</span>
<span class="sd">        yacc_optimize : bool, optional</span>
<span class="sd">            Set to false when unstable and true when parser is stable.</span>
<span class="sd">        yacc_table : str, optional</span>
<span class="sd">            Parser module used when optimized.</span>
<span class="sd">        yacc_debug : debug, optional</span>
<span class="sd">            Dumps extra debug info.</span>
<span class="sd">        outputdir : str or None, optional</span>
<span class="sd">            The directory to place generated tables within.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lexer</span> <span class="o">=</span> <span class="n">lexer</span> <span class="o">=</span> <span class="n">Lexer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span> <span class="o">=</span> <span class="n">lexer</span><span class="o">.</span><span class="n">tokens</span>

        <span class="n">opt_rules</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;newlines&#39;</span><span class="p">,</span> <span class="s">&#39;arglist&#39;</span><span class="p">,</span> <span class="s">&#39;func_call&#39;</span><span class="p">,</span> <span class="s">&#39;rarrow_test&#39;</span><span class="p">,</span> <span class="s">&#39;typedargslist&#39;</span><span class="p">,</span>
            <span class="s">&#39;equals_test&#39;</span><span class="p">,</span> <span class="s">&#39;colon_test&#39;</span><span class="p">,</span> <span class="s">&#39;tfpdef&#39;</span><span class="p">,</span> <span class="s">&#39;comma_tfpdef_list&#39;</span><span class="p">,</span>
            <span class="s">&#39;comma_pow_tfpdef&#39;</span><span class="p">,</span> <span class="s">&#39;vfpdef&#39;</span><span class="p">,</span> <span class="s">&#39;comma_vfpdef_list&#39;</span><span class="p">,</span>
            <span class="s">&#39;comma_pow_vfpdef&#39;</span><span class="p">,</span> <span class="s">&#39;equals_yield_expr_or_testlist_list&#39;</span><span class="p">,</span>
            <span class="s">&#39;testlist&#39;</span><span class="p">,</span> <span class="s">&#39;as_name&#39;</span><span class="p">,</span> <span class="s">&#39;period_or_ellipsis_list&#39;</span><span class="p">,</span>
            <span class="s">&#39;comma_import_as_name_list&#39;</span><span class="p">,</span> <span class="s">&#39;comma_dotted_as_name_list&#39;</span><span class="p">,</span>
            <span class="s">&#39;comma_name_list&#39;</span><span class="p">,</span> <span class="s">&#39;comma_test&#39;</span><span class="p">,</span> <span class="s">&#39;elif_part_list&#39;</span><span class="p">,</span> <span class="s">&#39;finally_part&#39;</span><span class="p">,</span>
            <span class="s">&#39;varargslist&#39;</span><span class="p">,</span> <span class="s">&#39;or_and_test_list&#39;</span><span class="p">,</span> <span class="s">&#39;and_not_test_list&#39;</span><span class="p">,</span>
            <span class="s">&#39;comp_op_expr_list&#39;</span><span class="p">,</span> <span class="s">&#39;xor_and_expr_list&#39;</span><span class="p">,</span>
            <span class="s">&#39;ampersand_shift_expr_list&#39;</span><span class="p">,</span> <span class="s">&#39;shift_arith_expr_list&#39;</span><span class="p">,</span>
            <span class="s">&#39;op_factor_list&#39;</span><span class="p">,</span> <span class="s">&#39;trailer_list&#39;</span><span class="p">,</span> <span class="s">&#39;testlist_comp&#39;</span><span class="p">,</span>
            <span class="s">&#39;yield_expr_or_testlist_comp&#39;</span><span class="p">,</span> <span class="s">&#39;dictorsetmaker&#39;</span><span class="p">,</span>
            <span class="s">&#39;comma_subscript_list&#39;</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;sliceop&#39;</span><span class="p">,</span> <span class="s">&#39;comp_iter&#39;</span><span class="p">,</span>
            <span class="s">&#39;yield_arg&#39;</span><span class="p">,</span> <span class="s">&#39;test_comma_list&#39;</span><span class="p">,]</span>
        <span class="k">if</span> <span class="n">VER_MAJOR_MINOR</span> <span class="o">&lt;=</span> <span class="n">VER_3_4</span><span class="p">:</span>
            <span class="n">opt_rules</span> <span class="o">+=</span> <span class="p">[</span><span class="s">&#39;argument_comma_list&#39;</span><span class="p">,</span> <span class="s">&#39;comma_argument_list&#39;</span><span class="p">,]</span>
        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">opt_rules</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_opt_rule</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span>

        <span class="n">list_rules</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;comma_tfpdef&#39;</span><span class="p">,</span> <span class="s">&#39;comma_vfpdef&#39;</span><span class="p">,</span> <span class="s">&#39;semi_small_stmt&#39;</span><span class="p">,</span>
            <span class="s">&#39;comma_test_or_star_expr&#39;</span><span class="p">,</span> <span class="s">&#39;period_or_ellipsis&#39;</span><span class="p">,</span>
            <span class="s">&#39;comma_import_as_name&#39;</span><span class="p">,</span> <span class="s">&#39;comma_dotted_as_name&#39;</span><span class="p">,</span> <span class="s">&#39;period_name&#39;</span><span class="p">,</span>
            <span class="s">&#39;comma_name&#39;</span><span class="p">,</span> <span class="s">&#39;elif_part&#39;</span><span class="p">,</span> <span class="s">&#39;except_part&#39;</span><span class="p">,</span> <span class="s">&#39;comma_with_item&#39;</span><span class="p">,</span>
            <span class="s">&#39;or_and_test&#39;</span><span class="p">,</span> <span class="s">&#39;and_not_test&#39;</span><span class="p">,</span> <span class="s">&#39;comp_op_expr&#39;</span><span class="p">,</span> <span class="s">&#39;pipe_xor_expr&#39;</span><span class="p">,</span>
            <span class="s">&#39;xor_and_expr&#39;</span><span class="p">,</span> <span class="s">&#39;ampersand_shift_expr&#39;</span><span class="p">,</span> <span class="s">&#39;shift_arith_expr&#39;</span><span class="p">,</span>
            <span class="s">&#39;pm_term&#39;</span><span class="p">,</span> <span class="s">&#39;op_factor&#39;</span><span class="p">,</span> <span class="s">&#39;trailer&#39;</span><span class="p">,</span> <span class="s">&#39;comma_subscript&#39;</span><span class="p">,</span>
            <span class="s">&#39;comma_expr_or_star_expr&#39;</span><span class="p">,</span> <span class="s">&#39;comma_test&#39;</span><span class="p">,</span> <span class="s">&#39;comma_argument&#39;</span><span class="p">,</span> <span class="s">&#39;comma_item&#39;</span><span class="p">,</span>
            <span class="s">&#39;attr_period_name&#39;</span><span class="p">,</span> <span class="s">&#39;test_comma&#39;</span><span class="p">,</span> <span class="s">&#39;equals_yield_expr_or_testlist&#39;</span><span class="p">,</span>
            <span class="s">&#39;test_or_star_expr&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">VER_MAJOR_MINOR</span> <span class="o">&lt;=</span> <span class="n">VER_3_4</span><span class="p">:</span>
            <span class="n">list_rules</span> <span class="o">+=</span> <span class="p">[</span><span class="s">&#39;argument_comma&#39;</span><span class="p">,]</span>
        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">list_rules</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_list_rule</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span>

        <span class="n">yacc_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">debug</span><span class="o">=</span><span class="n">yacc_debug</span><span class="p">,</span>
                           <span class="n">start</span><span class="o">=</span><span class="s">&#39;start_symbols&#39;</span><span class="p">,</span>
                           <span class="n">optimize</span><span class="o">=</span><span class="n">yacc_optimize</span><span class="p">,</span>
                           <span class="n">tabmodule</span><span class="o">=</span><span class="n">yacc_table</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">yacc_debug</span><span class="p">:</span>
            <span class="n">yacc_kwargs</span><span class="p">[</span><span class="s">&#39;errorlog&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">yacc</span><span class="o">.</span><span class="n">NullLogger</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">outputdir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">yacc_kwargs</span><span class="p">[</span><span class="s">&#39;outputdir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outputdir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">yacc</span><span class="o">.</span><span class="n">yacc</span><span class="p">(</span><span class="o">**</span><span class="n">yacc_kwargs</span><span class="p">)</span>

        <span class="c"># Keeps track of the last token given to yacc (the lookahead token)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_yielded_token</span> <span class="o">=</span> <span class="bp">None</span>

<div class="viewcode-block" id="Parser.reset"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Resets for clean parsing.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lexer</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_yielded_token</span> <span class="o">=</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="Parser.parse"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&#39;&lt;code&gt;&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;exec&#39;</span><span class="p">,</span> <span class="n">debug_level</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns an abstract syntax tree of xonsh code.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        s : str</span>
<span class="sd">            The xonsh code.</span>
<span class="sd">        filename : str, optional</span>
<span class="sd">            Name of the file.</span>
<span class="sd">        mode : str, optional</span>
<span class="sd">            Execution mode, one of: exec, eval, or single.</span>
<span class="sd">        debug_level : str, optional</span>
<span class="sd">            Debugging level passed down to yacc.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        tree : AST</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lexer</span><span class="o">.</span><span class="n">fname</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">lexer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lexer</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug_level</span><span class="p">)</span>
        <span class="c"># hack for getting modes right</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s">&#39;single&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Expression</span><span class="p">):</span>
                <span class="n">tree</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Interactive</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">expr</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">body</span><span class="p">)])</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
                <span class="n">tree</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Interactive</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">tree</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tree</span>
</div>
    <span class="k">def</span> <span class="nf">_lexer_errfunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_error</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currloc</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">column</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_yacc_lookahead_token</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the last token seen by the lexer.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lexer</span><span class="o">.</span><span class="n">last</span>

    <span class="k">def</span> <span class="nf">_opt_rule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rulename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;For a rule name, creates an associated optional rule.</span>
<span class="sd">        &#39;_opt&#39; is appended to the rule name.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">optfunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">optfunc</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;{0}_opt : empty</span><span class="se">\n</span><span class="s">&#39;</span>
                           <span class="s">&#39;        | {0}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rulename</span><span class="p">)</span>
        <span class="n">optfunc</span><span class="o">.</span><span class="n">__name__</span> <span class="o">=</span> <span class="s">&#39;p_&#39;</span> <span class="o">+</span> <span class="n">rulename</span> <span class="o">+</span> <span class="s">&#39;_opt&#39;</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">optfunc</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">optfunc</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_list_rule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rulename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;For a rule name, creates an associated list rule.</span>
<span class="sd">        &#39;_list&#39; is appended to the rule name.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="nf">listfunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

        <span class="n">listfunc</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;{0}_list : {0}</span><span class="se">\n</span><span class="s">&#39;</span>
                            <span class="s">&#39;         | {0}_list {0}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rulename</span><span class="p">)</span>
        <span class="n">listfunc</span><span class="o">.</span><span class="n">__name__</span> <span class="o">=</span> <span class="s">&#39;p_&#39;</span> <span class="o">+</span> <span class="n">rulename</span> <span class="o">+</span> <span class="s">&#39;_list&#39;</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">listfunc</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">listfunc</span><span class="p">)</span>

<div class="viewcode-block" id="Parser.currloc"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.currloc">[docs]</a>    <span class="k">def</span> <span class="nf">currloc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the current location.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Location</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lexer</span><span class="o">.</span><span class="n">fname</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">column</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.expr">[docs]</a>    <span class="k">def</span> <span class="nf">expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates an expression for a token.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ast</span><span class="o">.</span><span class="n">Expr</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">col_offset</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.token_col"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.token_col">[docs]</a>    <span class="k">def</span> <span class="nf">token_col</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets ths token column&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="n">lexpos</span>
</div>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">lineno</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lexer</span><span class="o">.</span><span class="n">last</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lexer</span><span class="o">.</span><span class="n">last</span><span class="o">.</span><span class="n">lineno</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">col</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_yacc_lookahead_token</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_col</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">_parse_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">loc</span><span class="p">):</span>
        <span class="n">err</span> <span class="o">=</span> <span class="ne">SyntaxError</span><span class="p">(</span><span class="s">&#39;{0}: {1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">msg</span><span class="p">))</span>
        <span class="n">err</span><span class="o">.</span><span class="n">loc</span> <span class="o">=</span> <span class="n">loc</span>
        <span class="k">raise</span> <span class="n">err</span>

    <span class="c">#</span>
    <span class="c"># Precedence of operators</span>
    <span class="c">#</span>
    <span class="n">precedence</span> <span class="o">=</span> <span class="p">((</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="s">&#39;PIPE&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="s">&#39;XOR&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="s">&#39;AMPERSAND&#39;</span><span class="p">),</span>
                  <span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="s">&#39;EQ&#39;</span><span class="p">,</span> <span class="s">&#39;NE&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="s">&#39;GT&#39;</span><span class="p">,</span> <span class="s">&#39;GE&#39;</span><span class="p">,</span> <span class="s">&#39;LT&#39;</span><span class="p">,</span> <span class="s">&#39;LE&#39;</span><span class="p">),</span>
                  <span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="s">&#39;RSHIFT&#39;</span><span class="p">,</span> <span class="s">&#39;LSHIFT&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="s">&#39;PLUS&#39;</span><span class="p">,</span> <span class="s">&#39;MINUS&#39;</span><span class="p">),</span>
                  <span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="s">&#39;TIMES&#39;</span><span class="p">,</span> <span class="s">&#39;DIVIDE&#39;</span><span class="p">,</span> <span class="s">&#39;DOUBLEDIV&#39;</span><span class="p">,</span> <span class="s">&#39;MOD&#39;</span><span class="p">),</span>
                  <span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="s">&#39;POW&#39;</span><span class="p">),</span> <span class="p">)</span>

    <span class="c">#</span>
    <span class="c"># Grammar as defined by BNF</span>
    <span class="c">#</span>

<div class="viewcode-block" id="Parser.p_start_symbols"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_start_symbols">[docs]</a>    <span class="k">def</span> <span class="nf">p_start_symbols</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;start_symbols : single_input</span>
<span class="sd">                         | file_input</span>
<span class="sd">                         | eval_input</span>
<span class="sd">                         | empty</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_single_input"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_single_input">[docs]</a>    <span class="k">def</span> <span class="nf">p_single_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;single_input : compound_stmt NEWLINE</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">empty_list_if_newline</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Interactive</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">p1</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_file_input"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_file_input">[docs]</a>    <span class="k">def</span> <span class="nf">p_file_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;file_input : file_stmts&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Module</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Parser.p_file_stmts"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_file_stmts">[docs]</a>    <span class="k">def</span> <span class="nf">p_file_stmts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;file_stmts : newline_or_stmt</span>
<span class="sd">                      | file_stmts newline_or_stmt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c"># newline_or_stmt ENDMARKER</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="n">empty_list_if_newline</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># file_input newline_or_stmt ENDMARKER</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">empty_list_if_newline</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">p2</span>
</div>
<div class="viewcode-block" id="Parser.p_newline_or_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_newline_or_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_newline_or_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;newline_or_stmt : NEWLINE</span>
<span class="sd">                           | stmt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_newlines"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_newlines">[docs]</a>    <span class="k">def</span> <span class="nf">p_newlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;newlines : NEWLINE</span>
<span class="sd">                    | newlines NEWLINE</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_eval_input"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_eval_input">[docs]</a>    <span class="k">def</span> <span class="nf">p_eval_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;eval_input : testlist newlines_opt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Expression</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Parser.p_func_call"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_func_call">[docs]</a>    <span class="k">def</span> <span class="nf">p_func_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;func_call : LPAREN arglist_opt RPAREN&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_attr_period_name"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_attr_period_name">[docs]</a>    <span class="k">def</span> <span class="nf">p_attr_period_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;attr_period_name : PERIOD NAME&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_attr_name"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_attr_name">[docs]</a>    <span class="k">def</span> <span class="nf">p_attr_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;attr_name : NAME</span>
<span class="sd">                     | NAME attr_period_name_list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span>
                        <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                        <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                        <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                               <span class="n">attr</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                               <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                               <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                               <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p0</span><span class="p">,</span>
                                   <span class="n">attr</span><span class="o">=</span><span class="n">a</span><span class="p">,</span>
                                   <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                                   <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                   <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_decorator"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_decorator">[docs]</a>    <span class="k">def</span> <span class="nf">p_decorator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;decorator : AT attr_name NEWLINE</span>
<span class="sd">                     | AT attr_name func_call NEWLINE</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">p3</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">elif</span> <span class="n">p3</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Call</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                          <span class="n">args</span><span class="o">=</span><span class="p">[],</span>
                          <span class="n">keywords</span><span class="o">=</span><span class="p">[],</span>
                          <span class="n">starargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">kwargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                          <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Call</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                          <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                          <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">,</span> <span class="o">**</span><span class="n">p3</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_decorators"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_decorators">[docs]</a>    <span class="k">def</span> <span class="nf">p_decorators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;decorators : decorator</span>
<span class="sd">                      | decorators decorator</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
    <span class="nd">@docstring_by_version</span><span class="p">(</span>
        <span class="n">v34</span><span class="o">=</span>\
        <span class="sd">&quot;&quot;&quot;classdef_or_funcdef : classdef</span>
<span class="sd">                               | funcdef</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
        <span class="n">v35</span><span class="o">=</span>\
        <span class="sd">&quot;&quot;&quot;classdef_or_funcdef : classdef</span>
<span class="sd">                               | funcdef</span>
<span class="sd">                               | async_funcdef</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
        <span class="p">)</span>
<div class="viewcode-block" id="Parser.p_classdef_or_funcdef"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_classdef_or_funcdef">[docs]</a>    <span class="k">def</span> <span class="nf">p_classdef_or_funcdef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_decorated"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_decorated">[docs]</a>    <span class="k">def</span> <span class="nf">p_decorated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;decorated : decorators classdef_or_funcdef&quot;&quot;&quot;</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">decorator_list</span> <span class="o">=</span> <span class="n">p1</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p2</span>
</div>
<div class="viewcode-block" id="Parser.p_rarrow_test"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_rarrow_test">[docs]</a>    <span class="k">def</span> <span class="nf">p_rarrow_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;rarrow_test : RARROW test&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_funcdef"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_funcdef">[docs]</a>    <span class="k">def</span> <span class="nf">p_funcdef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;funcdef : DEF NAME parameters rarrow_test_opt COLON suite&quot;&quot;&quot;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">FunctionDef</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                            <span class="n">args</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                            <span class="n">returns</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
                            <span class="n">body</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
                            <span class="n">decorator_list</span><span class="o">=</span><span class="p">[],</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_async_funcdef"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_async_funcdef">[docs]</a>    <span class="k">def</span> <span class="nf">p_async_funcdef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;async_funcdef : ASYNC funcdef&quot;&quot;&quot;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">AsyncFunctionDef</span><span class="p">(</span><span class="o">**</span><span class="n">f</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="Parser.p_parameters"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_parameters">[docs]</a>    <span class="k">def</span> <span class="nf">p_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;parameters : LPAREN typedargslist_opt RPAREN&quot;&quot;&quot;</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">arguments</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">[],</span>
                               <span class="n">vararg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                               <span class="n">kwonlyargs</span><span class="o">=</span><span class="p">[],</span>
                               <span class="n">kw_defaults</span><span class="o">=</span><span class="p">[],</span>
                               <span class="n">kwarg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                               <span class="n">defaults</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p2</span>
</div>
<div class="viewcode-block" id="Parser.p_equals_test"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_equals_test">[docs]</a>    <span class="k">def</span> <span class="nf">p_equals_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;equals_test : EQUALS test&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_typedargslist"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_typedargslist">[docs]</a>    <span class="k">def</span> <span class="nf">p_typedargslist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;typedargslist : tfpdef equals_test_opt comma_tfpdef_list_opt comma_opt</span>
<span class="sd">                         | tfpdef equals_test_opt comma_tfpdef_list_opt comma_opt TIMES tfpdef_opt COMMA POW vfpdef</span>
<span class="sd">                         | tfpdef equals_test_opt comma_tfpdef_list_opt comma_opt TIMES tfpdef_opt comma_tfpdef_list_opt</span>
<span class="sd">                         | tfpdef equals_test_opt comma_tfpdef_list_opt comma_opt TIMES tfpdef_opt comma_tfpdef_list COMMA POW tfpdef</span>
<span class="sd">                         | tfpdef equals_test_opt comma_tfpdef_list_opt comma_opt POW tfpdef</span>
<span class="sd">                         | TIMES tfpdef_opt comma_tfpdef_list comma_pow_tfpdef_opt</span>
<span class="sd">                         | TIMES tfpdef_opt comma_pow_tfpdef_opt</span>
<span class="sd">                         | POW tfpdef</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">p3</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="n">p4</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="c"># skip p5</span>
        <span class="n">p6</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">6</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="n">p7</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">7</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="c"># skip p8</span>
        <span class="n">p9</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">9</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="n">p10</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">arguments</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">[],</span>
                           <span class="n">vararg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">kwonlyargs</span><span class="o">=</span><span class="p">[],</span>
                           <span class="n">kw_defaults</span><span class="o">=</span><span class="p">[],</span>
                           <span class="n">kwarg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">defaults</span><span class="o">=</span><span class="p">[])</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">kwarg</span> <span class="o">=</span> <span class="n">p2</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">kwarg</span> <span class="o">=</span> <span class="n">p3</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">5</span> <span class="ow">and</span> <span class="n">p1</span> <span class="o">!=</span> <span class="s">&#39;*&#39;</span><span class="p">:</span>
            <span class="c"># x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_regular_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">5</span> <span class="ow">and</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;*&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span>  <span class="c"># *args</span>
            <span class="k">if</span> <span class="n">p4</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c"># *args, x, **kwargs</span>
                <span class="n">p0</span><span class="o">.</span><span class="n">kwarg</span> <span class="o">=</span> <span class="n">p4</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
            <span class="c"># x, **kwargs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_regular_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">kwarg</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="c"># x, *args</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_regular_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p6</span><span class="p">,</span> <span class="n">p7</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
            <span class="c"># x, *args, **kwargs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_regular_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p6</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">kwarg</span> <span class="o">=</span> <span class="n">p9</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
            <span class="c"># x, *args, **kwargs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_regular_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p6</span><span class="p">,</span> <span class="n">p7</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">kwarg</span> <span class="o">=</span> <span class="n">p10</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_colon_test"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_colon_test">[docs]</a>    <span class="k">def</span> <span class="nf">p_colon_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;colon_test : COLON test&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_tfpdef"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_tfpdef">[docs]</a>    <span class="k">def</span> <span class="nf">p_tfpdef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;tfpdef : NAME colon_test_opt&quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;arg&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                  <span class="s">&#39;annotation&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]}</span>
        <span class="k">if</span> <span class="n">VER_FULL</span> <span class="o">&gt;=</span> <span class="n">VER_3_5_1</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                <span class="s">&#39;lineno&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                <span class="s">&#39;col_offset&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">,</span>
            <span class="p">})</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">arg</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_tfpdef"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_tfpdef">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_tfpdef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_tfpdef : COMMA</span>
<span class="sd">                        | COMMA tfpdef equals_test_opt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;arg&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]}]</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_pow_tfpdef"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_pow_tfpdef">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_pow_tfpdef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_pow_tfpdef : COMMA POW tfpdef&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</div>
    <span class="k">def</span> <span class="nf">_set_args_def</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argmts</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="n">args</span><span class="p">,</span> <span class="n">defs</span> <span class="o">=</span> <span class="p">(</span><span class="n">argmts</span><span class="o">.</span><span class="n">kwonlyargs</span><span class="p">,</span> <span class="n">argmts</span><span class="o">.</span><span class="n">kw_defaults</span><span class="p">)</span> <span class="k">if</span> <span class="n">kwargs</span> <span class="k">else</span> \
                     <span class="p">(</span><span class="n">argmts</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="n">argmts</span><span class="o">.</span><span class="n">defaults</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="s">&#39;arg&#39;</span><span class="p">])</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="s">&#39;default&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="p">(</span><span class="n">d</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
                <span class="n">defs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_regular_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">p3</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># x</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">p2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">p3</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># x=42</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">defaults</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">p3</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># x, y and x, y=42</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_args_def</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># x=42, y=42</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">defaults</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_args_def</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_var_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">vararg</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">vararg</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_args_def</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">vararg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">kwargs</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># *args</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">vararg</span> <span class="o">=</span> <span class="n">vararg</span>
        <span class="k">elif</span> <span class="n">vararg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># *args, x and *args, x, y and *args, x=10 and *args, x=10, y</span>
            <span class="c"># and *args, x, y=10, and *args, x=42, y=65</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">vararg</span> <span class="o">=</span> <span class="n">vararg</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_args_def</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>

<div class="viewcode-block" id="Parser.p_varargslist"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_varargslist">[docs]</a>    <span class="k">def</span> <span class="nf">p_varargslist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;varargslist : vfpdef equals_test_opt comma_vfpdef_list_opt comma_opt</span>
<span class="sd">                       | vfpdef equals_test_opt comma_vfpdef_list_opt comma_opt TIMES vfpdef_opt COMMA POW vfpdef</span>
<span class="sd">                       | vfpdef equals_test_opt comma_vfpdef_list_opt comma_opt TIMES vfpdef_opt comma_vfpdef_list_opt</span>
<span class="sd">                       | vfpdef equals_test_opt comma_vfpdef_list_opt comma_opt TIMES vfpdef_opt comma_vfpdef_list COMMA POW vfpdef</span>
<span class="sd">                       | vfpdef equals_test_opt comma_vfpdef_list_opt comma_opt POW vfpdef</span>
<span class="sd">                       | TIMES vfpdef_opt comma_vfpdef_list comma_pow_vfpdef_opt</span>
<span class="sd">                       | TIMES vfpdef_opt comma_pow_vfpdef_opt</span>
<span class="sd">                       | POW vfpdef</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">p3</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="n">p4</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="c"># skip p5</span>
        <span class="n">p6</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">6</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="n">p7</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">7</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="c"># skip p8</span>
        <span class="n">p9</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">9</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="n">p10</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">arguments</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">[],</span>
                           <span class="n">vararg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">kwonlyargs</span><span class="o">=</span><span class="p">[],</span>
                           <span class="n">kw_defaults</span><span class="o">=</span><span class="p">[],</span>
                           <span class="n">kwarg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">defaults</span><span class="o">=</span><span class="p">[])</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">kwarg</span> <span class="o">=</span> <span class="n">p2</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">kwarg</span> <span class="o">=</span> <span class="n">p3</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">5</span> <span class="ow">and</span> <span class="n">p1</span> <span class="o">!=</span> <span class="s">&#39;*&#39;</span><span class="p">:</span>
            <span class="c"># x</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_regular_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">5</span> <span class="ow">and</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;*&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span>  <span class="c"># *args</span>
            <span class="k">if</span> <span class="n">p4</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c"># *args, x, **kwargs</span>
                <span class="n">p0</span><span class="o">.</span><span class="n">kwarg</span> <span class="o">=</span> <span class="n">p4</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
            <span class="c"># x, **kwargs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_regular_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">kwarg</span> <span class="o">=</span> <span class="n">p6</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="c"># x, *args</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_regular_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p6</span><span class="p">,</span> <span class="n">p7</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
            <span class="c"># x, *args, **kwargs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_regular_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p6</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">kwarg</span> <span class="o">=</span> <span class="n">p9</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span>
            <span class="c"># x, *args, **kwargs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_regular_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">p4</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_var_args</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p6</span><span class="p">,</span> <span class="n">p7</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">kwarg</span> <span class="o">=</span> <span class="n">p10</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_vfpdef"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_vfpdef">[docs]</a>    <span class="k">def</span> <span class="nf">p_vfpdef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;vfpdef : NAME&quot;&quot;&quot;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;arg&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                  <span class="s">&#39;annotation&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">VER_FULL</span> <span class="o">&gt;=</span> <span class="n">VER_3_5_1</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                <span class="s">&#39;lineno&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                <span class="s">&#39;col_offset&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">,</span>
            <span class="p">})</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">arg</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_vfpdef"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_vfpdef">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_vfpdef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_vfpdef : COMMA</span>
<span class="sd">                        | COMMA vfpdef equals_test_opt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;arg&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]}]</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_pow_vfpdef"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_pow_vfpdef">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_pow_vfpdef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_pow_vfpdef : COMMA POW vfpdef&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;stmt : simple_stmt</span>
<span class="sd">                | compound_stmt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_stmt_list"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_stmt_list">[docs]</a>    <span class="k">def</span> <span class="nf">p_stmt_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;stmt_list : stmt</span>
<span class="sd">                     | stmt_list stmt&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_semi_opt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_semi_opt">[docs]</a>    <span class="k">def</span> <span class="nf">p_semi_opt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;semi_opt : SEMI</span>
<span class="sd">                    | empty</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_semi_small_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_semi_small_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_semi_small_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;semi_small_stmt : SEMI small_stmt&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_simple_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_simple_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_simple_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;simple_stmt : small_stmt semi_small_stmt_list semi_opt NEWLINE</span>
<span class="sd">                       | small_stmt semi_opt NEWLINE</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">p2</span> <span class="o">!=</span> <span class="s">&#39;;&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">+=</span> <span class="n">p2</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_small_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_small_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_small_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;small_stmt : expr_stmt</span>
<span class="sd">                      | del_stmt</span>
<span class="sd">                      | pass_stmt</span>
<span class="sd">                      | flow_stmt</span>
<span class="sd">                      | import_stmt</span>
<span class="sd">                      | global_stmt</span>
<span class="sd">                      | nonlocal_stmt</span>
<span class="sd">                      | assert_stmt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
    <span class="n">_augassign_op</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;+=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Add</span><span class="p">,</span>
        <span class="s">&#39;-=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Sub</span><span class="p">,</span>
        <span class="s">&#39;*=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Mult</span><span class="p">,</span>
        <span class="s">&#39;@=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">MatMult</span><span class="p">,</span>
        <span class="s">&#39;/=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Div</span><span class="p">,</span>
        <span class="s">&#39;%=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Mod</span><span class="p">,</span>
        <span class="s">&#39;//=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">FloorDiv</span><span class="p">,</span>
        <span class="s">&#39;**=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Pow</span><span class="p">,</span>
        <span class="s">&#39;^=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">BitXor</span><span class="p">,</span>
        <span class="s">&#39;&amp;=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">BitAnd</span><span class="p">,</span>
        <span class="s">&#39;|=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">BitOr</span><span class="p">,</span>
        <span class="s">&#39;&lt;&lt;=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">LShift</span><span class="p">,</span>
        <span class="s">&#39;&gt;&gt;=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">RShift</span>
    <span class="p">}</span>

<div class="viewcode-block" id="Parser.p_expr_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_expr_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_expr_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;expr_stmt : testlist_star_expr augassign yield_expr_or_testlist</span>
<span class="sd">                     | testlist_star_expr equals_yield_expr_or_testlist_list_opt</span>
<span class="sd">                     | testlist equals_yield_expr_or_testlist_list_opt</span>
<span class="sd">                     | test_comma_list_opt star_expr comma_test_list equals_yield_expr_or_testlist</span>
<span class="sd">                     | test_comma_list_opt star_expr comma_opt test_comma_list_opt equals_yield_expr_or_testlist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">p1</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">p1</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">):</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">targ</span> <span class="ow">in</span> <span class="n">p1</span><span class="p">:</span>
            <span class="n">store_ctx</span><span class="p">(</span><span class="n">targ</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">load_ctx</span><span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr</span><span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">store_ctx</span><span class="p">,</span> <span class="n">p2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Assign</span><span class="p">(</span><span class="n">targets</span><span class="o">=</span><span class="n">p1</span> <span class="o">+</span> <span class="n">p2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                                <span class="n">value</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                                <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_augassign_op</span><span class="p">[</span><span class="n">p2</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">op</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_error</span><span class="p">(</span><span class="s">&#39;operation {0!r} not supported&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p2</span><span class="p">),</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">currloc</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">lexpos</span><span class="p">))</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">AugAssign</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">(),</span> <span class="n">value</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                               <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">5</span> <span class="ow">or</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="n">targs</span><span class="p">,</span> <span class="n">rhs</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">targs</span><span class="p">,</span> <span class="n">rhs</span> <span class="o">=</span> <span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="ow">or</span> <span class="p">[]),</span> <span class="n">p</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">store_ctx</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">targ</span> <span class="ow">in</span> <span class="n">targs</span><span class="p">:</span>
                <span class="n">store_ctx</span><span class="p">(</span><span class="n">targ</span><span class="p">)</span>
            <span class="n">p1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
            <span class="n">p1</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">targs</span><span class="p">)</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span>
                            <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Store</span><span class="p">(),</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)]</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Assign</span><span class="p">(</span><span class="n">targets</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span>
                            <span class="n">value</span><span class="o">=</span><span class="n">rhs</span><span class="p">,</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_test_comma"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_test_comma">[docs]</a>    <span class="k">def</span> <span class="nf">p_test_comma</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;test_comma : test COMMA&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_opt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_opt">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_opt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_opt : COMMA</span>
<span class="sd">                     | empty</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_test_or_star_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_test_or_star_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_test_or_star_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;test_or_star_expr : test</span>
<span class="sd">                             | star_expr</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_test_or_star_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_test_or_star_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_test_or_star_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_test_or_star_expr : COMMA test_or_star_expr&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_testlist_star_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_testlist_star_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_testlist_star_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;testlist_star_expr : test_or_star_expr comma_test_or_star_expr_list comma_opt</span>
<span class="sd">                              | test_or_star_expr comma_opt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p2</span> <span class="o">==</span> <span class="s">&#39;,&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="p">[</span><span class="n">p1</span><span class="p">],</span>
                            <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="p">[</span><span class="n">p1</span><span class="p">]</span> <span class="o">+</span> <span class="n">p2</span><span class="p">,</span>
                            <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)]</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_augassign"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_augassign">[docs]</a>    <span class="k">def</span> <span class="nf">p_augassign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;augassign : PLUSEQUAL</span>
<span class="sd">                     | MINUSEQUAL</span>
<span class="sd">                     | TIMESEQUAL</span>
<span class="sd">                     | ATEQUAL</span>
<span class="sd">                     | DIVEQUAL</span>
<span class="sd">                     | MODEQUAL</span>
<span class="sd">                     | AMPERSANDEQUAL</span>
<span class="sd">                     | PIPEEQUAL</span>
<span class="sd">                     | XOREQUAL</span>
<span class="sd">                     | LSHIFTEQUAL</span>
<span class="sd">                     | RSHIFTEQUAL</span>
<span class="sd">                     | POWEQUAL</span>
<span class="sd">                     | DOUBLEDIVEQUAL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_yield_expr_or_testlist"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_yield_expr_or_testlist">[docs]</a>    <span class="k">def</span> <span class="nf">p_yield_expr_or_testlist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;yield_expr_or_testlist : yield_expr</span>
<span class="sd">                                  | testlist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_equals_yield_expr_or_testlist"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_equals_yield_expr_or_testlist">[docs]</a>    <span class="k">def</span> <span class="nf">p_equals_yield_expr_or_testlist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;equals_yield_expr_or_testlist : EQUALS yield_expr_or_testlist&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>

    <span class="c">#</span>
    <span class="c"># For normal assignments, additional restrictions enforced</span>
    <span class="c"># by the interpreter</span>
    <span class="c">#</span></div>
<div class="viewcode-block" id="Parser.p_del_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_del_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_del_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;del_stmt : DEL exprlist&quot;&quot;&quot;</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">targ</span> <span class="ow">in</span> <span class="n">p2</span><span class="p">:</span>
            <span class="n">targ</span><span class="o">.</span><span class="n">ctx</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Del</span><span class="p">()</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Delete</span><span class="p">(</span><span class="n">targets</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_pass_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_pass_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_pass_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;pass_stmt : PASS&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Pass</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_flow_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_flow_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_flow_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;flow_stmt : break_stmt</span>
<span class="sd">                     | continue_stmt</span>
<span class="sd">                     | return_stmt</span>
<span class="sd">                     | raise_stmt</span>
<span class="sd">                     | yield_stmt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_break_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_break_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_break_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;break_stmt : BREAK&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Break</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_continue_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_continue_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_continue_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;continue_stmt : CONTINUE&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Continue</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_return_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_return_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_return_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;return_stmt : RETURN testlist_opt&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Return</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_yield_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_yield_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_yield_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;yield_stmt : yield_expr&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Parser.p_raise_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_raise_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_raise_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;raise_stmt : RAISE</span>
<span class="sd">                      | RAISE test</span>
<span class="sd">                      | RAISE test FROM test</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">cause</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">exc</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">exc</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">exc</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">cause</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Raise</span><span class="p">(</span><span class="n">exc</span><span class="o">=</span><span class="n">exc</span><span class="p">,</span>
                       <span class="n">cause</span><span class="o">=</span><span class="n">cause</span><span class="p">,</span>
                       <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                       <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_import_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_import_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_import_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;import_stmt : import_name</span>
<span class="sd">                       | import_from</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_import_name"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_import_name">[docs]</a>    <span class="k">def</span> <span class="nf">p_import_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;import_name : IMPORT dotted_as_names</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Import</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_import_from_pre"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_import_from_pre">[docs]</a>    <span class="k">def</span> <span class="nf">p_import_from_pre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;import_from_pre : FROM period_or_ellipsis_list_opt dotted_name</span>
<span class="sd">                           | FROM period_or_ellipsis_list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p3</span> <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">p2</span> <span class="o">+</span> <span class="n">p3</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_import_from_post"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_import_from_post">[docs]</a>    <span class="k">def</span> <span class="nf">p_import_from_post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;import_from_post : TIMES</span>
<span class="sd">                            | LPAREN import_as_names RPAREN</span>
<span class="sd">                            | import_as_names</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;*&#39;</span><span class="p">:</span>
                <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="n">asname</span><span class="o">=</span><span class="bp">None</span><span class="p">)]</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_import_from"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_import_from">[docs]</a>    <span class="k">def</span> <span class="nf">p_import_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;import_from : import_from_pre IMPORT import_from_post</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># note below: the (&#39;.&#39; | &#39;...&#39;) is necessary because &#39;...&#39; is</span>
        <span class="c"># tokenized as ELLIPSIS</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">mod</span> <span class="o">=</span> <span class="n">p1</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span>
        <span class="n">lvl</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">mod</span><span class="p">)</span>
        <span class="n">mod</span> <span class="o">=</span> <span class="n">mod</span> <span class="ow">or</span> <span class="bp">None</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">ImportFrom</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="n">mod</span><span class="p">,</span>
                              <span class="n">names</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                              <span class="n">level</span><span class="o">=</span><span class="n">lvl</span><span class="p">,</span>
                              <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                              <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_period_or_ellipsis"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_period_or_ellipsis">[docs]</a>    <span class="k">def</span> <span class="nf">p_period_or_ellipsis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;period_or_ellipsis : PERIOD</span>
<span class="sd">                              | ELLIPSIS</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_as_name"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_as_name">[docs]</a>    <span class="k">def</span> <span class="nf">p_as_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;as_name : AS NAME&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_import_as_name"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_import_as_name">[docs]</a>    <span class="k">def</span> <span class="nf">p_import_as_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;import_as_name : NAME as_name_opt&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">asname</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_import_as_name"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_import_as_name">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_import_as_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_import_as_name : COMMA import_as_name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_dotted_as_name"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_dotted_as_name">[docs]</a>    <span class="k">def</span> <span class="nf">p_dotted_as_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;dotted_as_name : dotted_name as_name_opt&quot;&quot;&quot;</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">asname</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_dotted_as_name"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_dotted_as_name">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_dotted_as_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_dotted_as_name : COMMA dotted_as_name&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_import_as_names"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_import_as_names">[docs]</a>    <span class="k">def</span> <span class="nf">p_import_as_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;import_as_names : import_as_name comma_import_as_name_list_opt comma_opt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_dotted_as_names"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_dotted_as_names">[docs]</a>    <span class="k">def</span> <span class="nf">p_dotted_as_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;dotted_as_names : dotted_as_name comma_dotted_as_name_list_opt&quot;&quot;&quot;</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_period_name"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_period_name">[docs]</a>    <span class="k">def</span> <span class="nf">p_period_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;period_name : PERIOD NAME&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_dotted_name"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_dotted_name">[docs]</a>    <span class="k">def</span> <span class="nf">p_dotted_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;dotted_name : NAME</span>
<span class="sd">                       | NAME period_name_list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_name"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_name">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_name : COMMA NAME&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_global_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_global_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_global_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;global_stmt : GLOBAL NAME comma_name_list_opt&quot;&quot;&quot;</span>
        <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">p2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p3</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">+=</span> <span class="n">p3</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Global</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_nonlocal_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_nonlocal_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_nonlocal_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;nonlocal_stmt : NONLOCAL NAME comma_name_list_opt&quot;&quot;&quot;</span>
        <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="n">p2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p3</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">+=</span> <span class="n">p3</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Nonlocal</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_test"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_test">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_test : COMMA test&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_assert_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_assert_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_assert_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;assert_stmt : ASSERT test comma_test_opt&quot;&quot;&quot;</span>
        <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p3</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p3</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">False</span>
            <span class="n">p3</span> <span class="o">=</span> <span class="n">p3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Assert</span><span class="p">(</span><span class="n">test</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span>
                        <span class="n">msg</span><span class="o">=</span><span class="n">p3</span><span class="p">,</span>
                        <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                        <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_compound_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_compound_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_compound_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;compound_stmt : if_stmt</span>
<span class="sd">                         | while_stmt</span>
<span class="sd">                         | for_stmt</span>
<span class="sd">                         | try_stmt</span>
<span class="sd">                         | with_stmt</span>
<span class="sd">                         | funcdef</span>
<span class="sd">                         | classdef</span>
<span class="sd">                         | decorated</span>
<span class="sd">                         | async_stmt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_elif_part"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_elif_part">[docs]</a>    <span class="k">def</span> <span class="nf">p_elif_part</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;elif_part : ELIF test COLON suite&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">If</span><span class="p">(</span><span class="n">test</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                       <span class="n">body</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
                       <span class="n">orelse</span><span class="o">=</span><span class="p">[],</span>
                       <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                       <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="Parser.p_else_part"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_else_part">[docs]</a>    <span class="k">def</span> <span class="nf">p_else_part</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;else_part : ELSE COLON suite&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_if_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_if_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_if_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;if_stmt : IF test COLON suite elif_part_list_opt</span>
<span class="sd">                   | IF test COLON suite elif_part_list_opt else_part</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lastif</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">If</span><span class="p">(</span><span class="n">test</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                        <span class="n">body</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
                        <span class="n">orelse</span><span class="o">=</span><span class="p">[],</span>
                        <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                        <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">lastif</span><span class="p">]</span>
        <span class="n">p5</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">p6</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">6</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">p5</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">elseif</span> <span class="ow">in</span> <span class="n">p5</span><span class="p">:</span>
                <span class="n">lastif</span><span class="o">.</span><span class="n">orelse</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elseif</span><span class="p">)</span>
                <span class="n">lastif</span> <span class="o">=</span> <span class="n">elseif</span>
        <span class="n">lastif</span><span class="o">.</span><span class="n">orelse</span> <span class="o">=</span> <span class="n">p6</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_while_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_while_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_while_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;while_stmt : WHILE test COLON suite</span>
<span class="sd">                      | WHILE test COLON suite else_part</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p5</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">While</span><span class="p">(</span><span class="n">test</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                          <span class="n">body</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
                          <span class="n">orelse</span><span class="o">=</span><span class="n">p5</span><span class="p">,</span>
                          <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                          <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="Parser.p_for_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_for_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_for_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;for_stmt : FOR exprlist IN testlist COLON suite</span>
<span class="sd">                    | FOR exprlist IN testlist COLON suite else_part</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">p7</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">7</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">store_ctx</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p2</span><span class="p">:</span>
                <span class="n">store_ctx</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span>
                           <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Store</span><span class="p">(),</span>
                           <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                           <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">For</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span>
                        <span class="nb">iter</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
                        <span class="n">body</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span>
                        <span class="n">orelse</span><span class="o">=</span><span class="n">p7</span><span class="p">,</span>
                        <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                        <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="Parser.p_async_for_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_async_for_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_async_for_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;async_for_stmt : ASYNC for_stmt&quot;&quot;&quot;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">AsyncFor</span><span class="p">(</span><span class="o">**</span><span class="n">f</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="Parser.p_except_part"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_except_part">[docs]</a>    <span class="k">def</span> <span class="nf">p_except_part</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;except_part : except_clause COLON suite&quot;&quot;&quot;</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">p0</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p0</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_finally_part"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_finally_part">[docs]</a>    <span class="k">def</span> <span class="nf">p_finally_part</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;finally_part : FINALLY COLON suite&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_try_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_try_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_try_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;try_stmt : TRY COLON suite except_part_list else_part finally_part_opt</span>
<span class="sd">                    | TRY COLON suite except_part_list finally_part_opt</span>
<span class="sd">                    | TRY COLON suite finally_part</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Try</span><span class="p">(</span><span class="n">body</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
            <span class="n">p5</span><span class="p">,</span> <span class="n">p6</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
            <span class="n">t</span><span class="o">.</span><span class="n">handlers</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">t</span><span class="o">.</span><span class="n">orelse</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">p5</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">p5</span>
            <span class="n">t</span><span class="o">.</span><span class="n">finalbody</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">p6</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">p6</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">p5</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
            <span class="n">t</span><span class="o">.</span><span class="n">handlers</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">t</span><span class="o">.</span><span class="n">orelse</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">t</span><span class="o">.</span><span class="n">finalbody</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">p5</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">p5</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span><span class="o">.</span><span class="n">handlers</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">t</span><span class="o">.</span><span class="n">orelse</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">t</span><span class="o">.</span><span class="n">finalbody</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_with_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_with_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_with_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;with_stmt : WITH with_item COLON suite</span>
<span class="sd">                     | WITH with_item comma_with_item_list COLON suite</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p2</span> <span class="o">+=</span> <span class="n">p3</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">With</span><span class="p">(</span><span class="n">items</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span>
                         <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
                         <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                         <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="Parser.p_async_with_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_async_with_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_async_with_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;async_with_stmt : ASYNC with_stmt&quot;&quot;&quot;</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">AsyncWith</span><span class="p">(</span><span class="o">**</span><span class="n">w</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="Parser.p_as_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_as_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_as_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;as_expr : AS expr&quot;&quot;&quot;</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">store_ctx</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p2</span>
</div>
<div class="viewcode-block" id="Parser.p_with_item"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_with_item">[docs]</a>    <span class="k">def</span> <span class="nf">p_with_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;with_item : test</span>
<span class="sd">                     | test as_expr</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">withitem</span><span class="p">(</span><span class="n">context_expr</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">optional_vars</span><span class="o">=</span><span class="n">p2</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_with_item"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_with_item">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_with_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_with_item : COMMA with_item&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_except_clause"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_except_clause">[docs]</a>    <span class="k">def</span> <span class="nf">p_except_clause</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;except_clause : EXCEPT</span>
<span class="sd">                         | EXCEPT test as_name_opt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">ExceptHandler</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                   <span class="n">name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                   <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                   <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">ExceptHandler</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                                   <span class="n">name</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                                   <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                   <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_async_stmt"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_async_stmt">[docs]</a>    <span class="k">def</span> <span class="nf">p_async_stmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;async_stmt : async_funcdef</span>
<span class="sd">                      | async_with_stmt</span>
<span class="sd">                      | async_for_stmt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_suite"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_suite">[docs]</a>    <span class="k">def</span> <span class="nf">p_suite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;suite : simple_stmt</span>
<span class="sd">                 | NEWLINE INDENT stmt_list DEDENT</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_test"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_test">[docs]</a>    <span class="k">def</span> <span class="nf">p_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;test : or_test</span>
<span class="sd">                | or_test IF or_test ELSE test</span>
<span class="sd">                | lambdef</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">IfExp</span><span class="p">(</span><span class="n">test</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                           <span class="n">body</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                           <span class="n">orelse</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
                           <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                           <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_test_nocond"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_test_nocond">[docs]</a>    <span class="k">def</span> <span class="nf">p_test_nocond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;test_nocond : or_test</span>
<span class="sd">                       | lambdef_nocond</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_lambdef"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_lambdef">[docs]</a>    <span class="k">def</span> <span class="nf">p_lambdef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;lambdef : LAMBDA varargslist_opt COLON test&quot;&quot;&quot;</span>
        <span class="n">p2</span><span class="p">,</span> <span class="n">p4</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">arguments</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">[],</span>
                                 <span class="n">vararg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">kwonlyargs</span><span class="o">=</span><span class="p">[],</span>
                                 <span class="n">kw_defaults</span><span class="o">=</span><span class="p">[],</span>
                                 <span class="n">kwarg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                 <span class="n">defaults</span><span class="o">=</span><span class="p">[])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">p2</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Lambda</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span>
                        <span class="n">body</span><span class="o">=</span><span class="n">p4</span><span class="p">,</span>
                        <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                        <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_lambdef_nocond"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_lambdef_nocond">[docs]</a>    <span class="k">def</span> <span class="nf">p_lambdef_nocond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;lambdef_nocond : LAMBDA varargslist_opt COLON test_nocond&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">False</span>
</div>
<div class="viewcode-block" id="Parser.p_or_test"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_or_test">[docs]</a>    <span class="k">def</span> <span class="nf">p_or_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;or_test : and_test or_and_test_list_opt&quot;&quot;&quot;</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">BoolOp</span><span class="p">(</span><span class="n">op</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                            <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">BoolOp</span><span class="p">(</span><span class="n">op</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                            <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">+</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">],</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_or_and_test"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_or_and_test">[docs]</a>    <span class="k">def</span> <span class="nf">p_or_and_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;or_and_test : OR and_test&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">Or</span><span class="p">(),</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_and_test"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_and_test">[docs]</a>    <span class="k">def</span> <span class="nf">p_and_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;and_test : not_test and_not_test_list_opt&quot;&quot;&quot;</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">BoolOp</span><span class="p">(</span><span class="n">op</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                            <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">BoolOp</span><span class="p">(</span><span class="n">op</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                            <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">+</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">],</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_and_not_test"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_and_not_test">[docs]</a>    <span class="k">def</span> <span class="nf">p_and_not_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;and_not_test : AND not_test&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">And</span><span class="p">(),</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_not_test"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_not_test">[docs]</a>    <span class="k">def</span> <span class="nf">p_not_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;not_test : NOT not_test</span>
<span class="sd">                    | comparison</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">UnaryOp</span><span class="p">(</span><span class="n">op</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Not</span><span class="p">(),</span>
                             <span class="n">operand</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                             <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                             <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_comparison"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comparison">[docs]</a>    <span class="k">def</span> <span class="nf">p_comparison</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comparison : expr comp_op_expr_list_opt&quot;&quot;&quot;</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Compare</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                             <span class="n">ops</span><span class="o">=</span><span class="n">p2</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span>
                             <span class="n">comparators</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">],</span>
                             <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                             <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_comp_op_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comp_op_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_comp_op_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comp_op_expr : comp_op expr&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
    <span class="n">_comp_ops</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;&lt;&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Lt</span><span class="p">,</span>
        <span class="s">&#39;&gt;&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Gt</span><span class="p">,</span>
        <span class="s">&#39;==&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Eq</span><span class="p">,</span>
        <span class="s">&#39;&gt;=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">GtE</span><span class="p">,</span>
        <span class="s">&#39;&lt;=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">LtE</span><span class="p">,</span>
        <span class="s">&#39;!=&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">NotEq</span><span class="p">,</span>
        <span class="s">&#39;in&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">In</span><span class="p">,</span>
        <span class="p">(</span><span class="s">&#39;not&#39;</span><span class="p">,</span> <span class="s">&#39;in&#39;</span><span class="p">):</span> <span class="n">ast</span><span class="o">.</span><span class="n">NotIn</span><span class="p">,</span>
        <span class="s">&#39;is&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Is</span><span class="p">,</span>
        <span class="p">(</span><span class="s">&#39;is&#39;</span><span class="p">,</span> <span class="s">&#39;not&#39;</span><span class="p">):</span> <span class="n">ast</span><span class="o">.</span><span class="n">IsNot</span>
    <span class="p">}</span>

<div class="viewcode-block" id="Parser.p_comp_op"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comp_op">[docs]</a>    <span class="k">def</span> <span class="nf">p_comp_op</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comp_op : LT</span>
<span class="sd">                   | GT</span>
<span class="sd">                   | EQ</span>
<span class="sd">                   | GE</span>
<span class="sd">                   | LE</span>
<span class="sd">                   | NE</span>
<span class="sd">                   | IN</span>
<span class="sd">                   | NOT IN</span>
<span class="sd">                   | IS</span>
<span class="sd">                   | IS NOT</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comp_ops</span><span class="p">[</span><span class="n">key</span><span class="p">]()</span>
</div>
<div class="viewcode-block" id="Parser.p_star_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_star_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_star_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;star_expr : TIMES expr&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Starred</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                           <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                           <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                           <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
</div>
    <span class="k">def</span> <span class="nf">_binop_combine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Combines binary operations&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p1</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">):</span>
            <span class="n">p2</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">p1</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p2</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">):</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">p1</span>
            <span class="k">for</span> <span class="n">bop</span> <span class="ow">in</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="n">bop</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">p0</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">bop</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">+</span> <span class="n">p2</span>
        <span class="k">return</span> <span class="n">p0</span>

<div class="viewcode-block" id="Parser.p_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;expr : xor_expr</span>
<span class="sd">                | xor_expr pipe_xor_expr_list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_binop_combine</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="bp">None</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_pipe_xor_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_pipe_xor_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_pipe_xor_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;pipe_xor_expr : PIPE xor_expr&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">op</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">BitOr</span><span class="p">(),</span>
                          <span class="n">right</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                          <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                          <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="Parser.p_xor_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_xor_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_xor_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;xor_expr : and_expr xor_and_expr_list_opt&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_binop_combine</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Parser.p_xor_and_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_xor_and_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_xor_and_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;xor_and_expr : XOR and_expr&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">op</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">BitXor</span><span class="p">(),</span>
                          <span class="n">right</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                          <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                          <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="Parser.p_and_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_and_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_and_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;and_expr : shift_expr ampersand_shift_expr_list_opt&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_binop_combine</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Parser.p_ampersand_shift_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_ampersand_shift_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_ampersand_shift_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;ampersand_shift_expr : AMPERSAND shift_expr&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">op</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">BitAnd</span><span class="p">(),</span>
                          <span class="n">right</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                          <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                          <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="Parser.p_shift_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_shift_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_shift_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;shift_expr : arith_expr shift_arith_expr_list_opt&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_binop_combine</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="Parser.p_shift_arith_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_shift_arith_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_shift_arith_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;shift_arith_expr : LSHIFT arith_expr</span>
<span class="sd">                            | RSHIFT arith_expr</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">LShift</span><span class="p">()</span> <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;&lt;&lt;&#39;</span> <span class="k">else</span> <span class="n">ast</span><span class="o">.</span><span class="n">RShift</span><span class="p">()</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">,</span>
                          <span class="n">right</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                          <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                          <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="Parser.p_arith_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_arith_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_arith_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;arith_expr : term</span>
<span class="sd">                      | term pm_term_list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                           <span class="n">op</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                           <span class="n">right</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                           <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                           <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">op</span><span class="p">,</span> <span class="n">right</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">p2</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]):</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">left</span><span class="p">,</span>
                                 <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">,</span>
                                 <span class="n">right</span><span class="o">=</span><span class="n">right</span><span class="p">,</span>
                                 <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                 <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">left</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
    <span class="n">_term_binops</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;+&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Add</span><span class="p">,</span>
        <span class="s">&#39;-&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Sub</span><span class="p">,</span>
        <span class="s">&#39;*&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Mult</span><span class="p">,</span>
        <span class="s">&#39;@&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">MatMult</span><span class="p">,</span>
        <span class="s">&#39;/&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Div</span><span class="p">,</span>
        <span class="s">&#39;%&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Mod</span><span class="p">,</span>
        <span class="s">&#39;//&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">FloorDiv</span>
    <span class="p">}</span>

<div class="viewcode-block" id="Parser.p_pm_term"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_pm_term">[docs]</a>    <span class="k">def</span> <span class="nf">p_pm_term</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;pm_term : PLUS term</span>
<span class="sd">                   | MINUS term</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_term_binops</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]]()</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">op</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_term"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_term">[docs]</a>    <span class="k">def</span> <span class="nf">p_term</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;term : factor op_factor_list_opt&quot;&quot;&quot;</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                           <span class="n">op</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                           <span class="n">right</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                           <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                           <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">op</span><span class="p">,</span> <span class="n">right</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">p2</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]):</span>
                <span class="n">left</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">left</span><span class="p">,</span>
                                 <span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">,</span>
                                 <span class="n">right</span><span class="o">=</span><span class="n">right</span><span class="p">,</span>
                                 <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                 <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">left</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_op_factor"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_op_factor">[docs]</a>    <span class="k">def</span> <span class="nf">p_op_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;op_factor : TIMES factor</span>
<span class="sd">                     | AT factor</span>
<span class="sd">                     | DIVIDE factor</span>
<span class="sd">                     | MOD factor</span>
<span class="sd">                     | DOUBLEDIV factor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_term_binops</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="k">if</span> <span class="n">op</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parse_error</span><span class="p">(</span><span class="s">&#39;operation {0!r} not supported&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">currloc</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">lexpos</span><span class="p">))</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">op</span><span class="p">(),</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
    <span class="n">_factor_ops</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;+&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">UAdd</span><span class="p">,</span> <span class="s">&#39;-&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">USub</span><span class="p">,</span> <span class="s">&#39;~&#39;</span><span class="p">:</span> <span class="n">ast</span><span class="o">.</span><span class="n">Invert</span><span class="p">}</span>

<div class="viewcode-block" id="Parser.p_factor"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_factor">[docs]</a>    <span class="k">def</span> <span class="nf">p_factor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;factor : PLUS factor</span>
<span class="sd">                  | MINUS factor</span>
<span class="sd">                  | TILDE factor</span>
<span class="sd">                  | power</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_factor_ops</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]]()</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">UnaryOp</span><span class="p">(</span><span class="n">op</span><span class="o">=</span><span class="n">op</span><span class="p">,</span>
                             <span class="n">operand</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                             <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                             <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_power"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_power">[docs]</a>    <span class="k">def</span> <span class="nf">p_power</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;power : atom_expr</span>
<span class="sd">                 | atom_expr POW factor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p1</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="c"># actual power rule</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">BinOp</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span>
                           <span class="n">op</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Pow</span><span class="p">(),</span>
                           <span class="n">right</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                           <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                           <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_yield_expr_or_testlist_comp"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_yield_expr_or_testlist_comp">[docs]</a>    <span class="k">def</span> <span class="nf">p_yield_expr_or_testlist_comp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;yield_expr_or_testlist_comp : yield_expr</span>
<span class="sd">                                       | testlist_comp</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
    <span class="k">def</span> <span class="nf">_list_or_elts_if_not_real_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&#39;_real_tuple&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                                             <span class="n">x</span><span class="o">.</span><span class="n">_real_tuple</span><span class="p">):</span>
            <span class="n">rtn</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">elts</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rtn</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">rtn</span>

    <span class="nd">@docstring_by_version</span><span class="p">(</span>
        <span class="n">v34</span><span class="o">=</span><span class="s">&quot;&quot;&quot;atom_expr : atom trailer_list_opt&quot;&quot;&quot;</span><span class="p">,</span>
        <span class="n">v35</span><span class="o">=</span>\
        <span class="sd">&quot;&quot;&quot;atom_expr : atom trailer_list_opt</span>
<span class="sd">                     | AWAIT atom trailer_list_opt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">)</span>
<div class="viewcode-block" id="Parser.p_atom_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_atom_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_atom_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">leader</span><span class="p">,</span> <span class="n">trailers</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">leader</span><span class="p">,</span> <span class="n">trailers</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="n">leader</span>
        <span class="k">if</span> <span class="n">trailers</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">trailers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">trailer</span> <span class="ow">in</span> <span class="n">trailers</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">trailer</span><span class="p">,</span> <span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">Index</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Slice</span><span class="p">)):</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Subscript</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">leader</span><span class="p">,</span>
                                   <span class="nb">slice</span><span class="o">=</span><span class="n">trailer</span><span class="p">,</span>
                                   <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                                   <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                   <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">trailer</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Call</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">leader</span><span class="p">,</span>
                              <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                              <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">,</span> <span class="o">**</span><span class="n">trailer</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">trailer</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">trailer</span> <span class="o">==</span> <span class="s">&#39;?&#39;</span><span class="p">:</span>
                    <span class="n">p0</span> <span class="o">=</span> <span class="n">xonsh_help</span><span class="p">(</span><span class="n">leader</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">trailer</span> <span class="o">==</span> <span class="s">&#39;??&#39;</span><span class="p">:</span>
                    <span class="n">p0</span> <span class="o">=</span> <span class="n">xonsh_superhelp</span><span class="p">(</span><span class="n">leader</span><span class="p">,</span>
                                         <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                         <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Attribute</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">leader</span><span class="p">,</span>
                                       <span class="n">attr</span><span class="o">=</span><span class="n">trailer</span><span class="p">,</span>
                                       <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                                       <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                       <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">False</span>
            <span class="n">leader</span> <span class="o">=</span> <span class="n">p0</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Await</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p0</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                           <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_atom"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_atom">[docs]</a>    <span class="k">def</span> <span class="nf">p_atom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;atom : LPAREN yield_expr_or_testlist_comp_opt RPAREN</span>
<span class="sd">                | LBRACKET testlist_comp_opt RBRACKET</span>
<span class="sd">                | LBRACE dictorsetmaker_opt RBRACE</span>
<span class="sd">                | NAME</span>
<span class="sd">                | number</span>
<span class="sd">                | string_literal_list</span>
<span class="sd">                | ELLIPSIS</span>
<span class="sd">                | NONE</span>
<span class="sd">                | TRUE</span>
<span class="sd">                | FALSE</span>
<span class="sd">                | REGEXPATH</span>
<span class="sd">                | DOLLAR_NAME</span>
<span class="sd">                | DOLLAR_LBRACE test RBRACE</span>
<span class="sd">                | DOLLAR_LPAREN subproc RPAREN</span>
<span class="sd">                | DOLLAR_LBRACKET subproc RBRACKET</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c"># plain-old atoms</span>
            <span class="n">bt</span> <span class="o">=</span> <span class="s">&#39;`&#39;</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">Num</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Str</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Bytes</span><span class="p">)):</span>
                <span class="k">pass</span>
            <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;True&#39;</span><span class="p">:</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">NameConstant</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                      <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                      <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;False&#39;</span><span class="p">:</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">NameConstant</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                                      <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                      <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;None&#39;</span><span class="p">:</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">NameConstant</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                      <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                      <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;...&#39;</span><span class="p">:</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Ellipsis</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">bt</span><span class="p">)</span> <span class="ow">and</span> <span class="n">p1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">bt</span><span class="p">):</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Str</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="n">bt</span><span class="p">),</span>
                             <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                             <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">xonsh_regexpath</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;$&#39;</span><span class="p">):</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_envvar_by_name</span><span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                                          <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                          <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span>
                              <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                              <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                              <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p1</span>
            <span class="k">return</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="c"># empty container atoms</span>
            <span class="k">if</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;(&#39;</span><span class="p">:</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="p">[],</span>
                               <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                               <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                               <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;[&#39;</span><span class="p">:</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="p">[],</span>
                              <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                              <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                              <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;{&#39;</span><span class="p">:</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Dict</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[],</span>
                              <span class="n">values</span><span class="o">=</span><span class="p">[],</span>
                              <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                              <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                              <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">False</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;(&#39;</span><span class="p">:</span>
            <span class="c"># filled, possible group container tuple atoms</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AST</span><span class="p">):</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">p2</span>
                <span class="n">p0</span><span class="o">.</span><span class="n">_real_tuple</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ast</span><span class="o">.</span><span class="n">AST</span><span class="p">):</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">False</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;[&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">GeneratorExp</span><span class="p">):</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">ListComp</span><span class="p">(</span><span class="n">elt</span><span class="o">=</span><span class="n">p2</span><span class="o">.</span><span class="n">elt</span><span class="p">,</span>
                                  <span class="n">generators</span><span class="o">=</span><span class="n">p2</span><span class="o">.</span><span class="n">generators</span><span class="p">,</span>
                                  <span class="n">lineno</span><span class="o">=</span><span class="n">p2</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                  <span class="n">col_offset</span><span class="o">=</span><span class="n">p2</span><span class="o">.</span><span class="n">col_offset</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="s">&#39;_real_tuple&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">p2</span><span class="o">.</span><span class="n">_real_tuple</span><span class="p">:</span>
                        <span class="n">elts</span> <span class="o">=</span> <span class="p">[</span><span class="n">p2</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">elts</span> <span class="o">=</span> <span class="n">p2</span><span class="o">.</span><span class="n">elts</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">elts</span> <span class="o">=</span> <span class="p">[</span><span class="n">p2</span><span class="p">]</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">List</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="n">elts</span><span class="p">,</span>
                              <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                              <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                              <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;{&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p2</span>
        <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;$&#39;</span><span class="p">):</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dollar_rules</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_string_literal"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_string_literal">[docs]</a>    <span class="k">def</span> <span class="nf">p_string_literal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;string_literal : STRING&quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Bytes</span> <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="n">ast</span><span class="o">.</span><span class="n">Str</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_string_literal_list"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_string_literal_list">[docs]</a>    <span class="k">def</span> <span class="nf">p_string_literal_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;string_literal_list : string_literal</span>
<span class="sd">                               | string_literal_list string_literal</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">s</span> <span class="o">+=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">s</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_number"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_number">[docs]</a>    <span class="k">def</span> <span class="nf">p_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;number : NUMBER&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Num</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_testlist_comp"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_testlist_comp">[docs]</a>    <span class="k">def</span> <span class="nf">p_testlist_comp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;testlist_comp : test_or_star_expr comp_for</span>
<span class="sd">                         | test_or_star_expr comma_opt</span>
<span class="sd">                         | test_or_star_expr comma_test_or_star_expr_list comma_opt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c"># split out grouping parentheses.</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">p1</span>
            <span class="k">elif</span> <span class="n">p2</span> <span class="o">==</span> <span class="s">&#39;,&#39;</span><span class="p">:</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="p">[</span><span class="n">p1</span><span class="p">],</span>
                               <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                               <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                               <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s">&#39;comps&#39;</span> <span class="ow">in</span> <span class="n">p2</span><span class="p">:</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">GeneratorExp</span><span class="p">(</span><span class="n">elt</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span>
                                      <span class="n">generators</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="s">&#39;comps&#39;</span><span class="p">],</span>
                                      <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                      <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">False</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="p">[</span><span class="n">p1</span><span class="p">],</span>
                           <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                           <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                           <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">p0</span><span class="o">.</span><span class="n">elts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_trailer"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_trailer">[docs]</a>    <span class="k">def</span> <span class="nf">p_trailer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;trailer : LPAREN arglist_opt RPAREN</span>
<span class="sd">                   | LBRACKET subscriptlist RBRACKET</span>
<span class="sd">                   | PERIOD NAME</span>
<span class="sd">                   | DOUBLE_QUESTION</span>
<span class="sd">                   | QUESTION</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;[&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">p2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;(&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">p2</span> <span class="ow">or</span> <span class="nb">dict</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">[],</span> <span class="n">keywords</span><span class="o">=</span><span class="p">[],</span> <span class="n">starargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">None</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;.&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">p2</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;?&#39;</span> <span class="ow">or</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;??&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_subscriptlist"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_subscriptlist">[docs]</a>    <span class="k">def</span> <span class="nf">p_subscriptlist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;subscriptlist : subscript comma_subscript_list_opt comma_opt&quot;&quot;&quot;</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p1</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="p">[</span><span class="n">p1</span><span class="o">.</span><span class="n">value</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">p2</span><span class="p">],</span>
                                 <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                                 <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                 <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p1</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_subscript"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_subscript">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_subscript</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_subscript : COMMA subscript&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_subscript"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_subscript">[docs]</a>    <span class="k">def</span> <span class="nf">p_subscript</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;subscript : test</span>
<span class="sd">                     | test_opt COLON test_opt sliceop_opt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Slice</span><span class="p">(</span><span class="n">lower</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">step</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_sliceop"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_sliceop">[docs]</a>    <span class="k">def</span> <span class="nf">p_sliceop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;sliceop : COLON test_opt&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_expr_or_star_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_expr_or_star_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_expr_or_star_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;expr_or_star_expr : expr</span>
<span class="sd">                             | star_expr</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_expr_or_star_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_expr_or_star_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_expr_or_star_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_expr_or_star_expr : COMMA expr_or_star_expr&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
<div class="viewcode-block" id="Parser.p_exprlist"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_exprlist">[docs]</a>    <span class="k">def</span> <span class="nf">p_exprlist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;exprlist : expr_or_star_expr comma_expr_or_star_expr_list comma_opt</span>
<span class="sd">                    | expr_or_star_expr comma_opt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">p3</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="k">else</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">p3</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p2</span> <span class="o">==</span> <span class="s">&#39;,&#39;</span> <span class="ow">and</span> <span class="n">p3</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">p2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p2</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_testlist"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_testlist">[docs]</a>    <span class="k">def</span> <span class="nf">p_testlist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;testlist : test comma_test_list COMMA</span>
<span class="sd">                    | test comma_test_list</span>
<span class="sd">                    | test COMMA</span>
<span class="sd">                    | test</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">)</span> <span class="ow">and</span> \
                    <span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="s">&#39;_real_tuple&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">p1</span><span class="o">.</span><span class="n">_real_tuple</span><span class="p">):</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Tuple</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="p">[</span><span class="n">p1</span><span class="p">],</span>
                               <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                               <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                               <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">ensure_has_elts</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span>
                                     <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                     <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="n">lenp</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="p">[]</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">p2</span> <span class="o">==</span> <span class="s">&#39;,&#39;</span> <span class="k">else</span> <span class="n">p2</span>
            <span class="n">p1</span><span class="o">.</span><span class="n">elts</span> <span class="o">+=</span> <span class="n">p2</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p1</span>
</div>
    <span class="nd">@docstring_by_version</span><span class="p">(</span>
        <span class="n">v34</span><span class="o">=</span><span class="s">&quot;&quot;&quot;item : test COLON test&quot;&quot;&quot;</span><span class="p">,</span>
        <span class="n">v35</span><span class="o">=</span>\
        <span class="sd">&quot;&quot;&quot;item : test COLON test</span>
<span class="sd">                | POW expr</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
        <span class="p">)</span>
<div class="viewcode-block" id="Parser.p_item"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_item">[docs]</a>    <span class="k">def</span> <span class="nf">p_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_comma_item"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_item">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_item : COMMA item&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_dictorsetmaker"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_dictorsetmaker">[docs]</a>    <span class="k">def</span> <span class="nf">p_dictorsetmaker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;dictorsetmaker : item comp_for</span>
<span class="sd">                          | test_or_star_expr comp_for</span>
<span class="sd">                          | testlist</span>
<span class="sd">                          | test_or_star_expr comma_opt</span>
<span class="sd">                          | test_or_star_expr comma_test_or_star_expr_list comma_opt</span>
<span class="sd">                          | test COLON testlist</span>
<span class="sd">                          | item comma_item_list comma_opt</span>
<span class="sd">                          | test COLON test comma_item_list comma_opt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">elts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_or_elts_if_not_real_tuple</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="n">elts</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                         <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">p2</span> <span class="o">==</span> <span class="s">&#39;,&#39;</span><span class="p">:</span>
                <span class="n">elts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_or_elts_if_not_real_tuple</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="n">elts</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">comps</span> <span class="o">=</span> <span class="n">p2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;comps&#39;</span><span class="p">,</span> <span class="p">[])</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">DictComp</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">generators</span><span class="o">=</span><span class="n">comps</span><span class="p">,</span>
                                      <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">SetComp</span><span class="p">(</span><span class="n">elt</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">generators</span><span class="o">=</span><span class="n">comps</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                     <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">cls</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Dict</span>
                <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">p2</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]):</span>
                    <span class="n">keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                    <span class="n">vals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Dict</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">vals</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                              <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p2</span> <span class="o">==</span> <span class="s">&#39;:&#39;</span><span class="p">:</span>
                <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">]</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_or_elts_if_not_real_tuple</span><span class="p">(</span><span class="n">p3</span><span class="p">)</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Dict</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">vals</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                              <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AST</span><span class="p">):</span>
                <span class="n">elts</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">]</span> <span class="o">+</span> <span class="n">p2</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">elts</span><span class="o">=</span><span class="n">elts</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                             <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">False</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">p4</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">]</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">p4</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span> <span class="n">p4</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]):</span>
                <span class="n">keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                <span class="n">vals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Dict</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="n">keys</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">vals</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                          <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_classdef"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_classdef">[docs]</a>    <span class="k">def</span> <span class="nf">p_classdef</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;classdef : CLASS NAME func_call_opt COLON suite&quot;&quot;&quot;</span>
        <span class="n">p3</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">b</span><span class="p">,</span> <span class="n">kw</span> <span class="o">=</span> <span class="p">([],</span> <span class="p">[])</span> <span class="k">if</span> <span class="n">p3</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="p">(</span><span class="n">p3</span><span class="p">[</span><span class="s">&#39;args&#39;</span><span class="p">],</span> <span class="n">p3</span><span class="p">[</span><span class="s">&#39;keywords&#39;</span><span class="p">])</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">ClassDef</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                         <span class="n">bases</span><span class="o">=</span><span class="n">b</span><span class="p">,</span>
                         <span class="n">keywords</span><span class="o">=</span><span class="n">kw</span><span class="p">,</span>
                         <span class="n">starargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                         <span class="n">kwargs</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                         <span class="n">body</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span>
                         <span class="n">decorator_list</span><span class="o">=</span><span class="p">[],</span>
                         <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                         <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="p">]</span>
</div>
    <span class="k">def</span> <span class="nf">_set_arg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">ensure_kw</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">keyword</span><span class="p">):</span>
            <span class="n">args</span><span class="p">[</span><span class="s">&#39;keywords&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">ensure_kw</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">VER_MAJOR_MINOR</span> <span class="o">&lt;=</span> <span class="n">VER_3_4</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s">&#39;kwargs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">arg</span>
            <span class="k">elif</span> <span class="n">VER_MAJOR_MINOR</span> <span class="o">&gt;=</span> <span class="n">VER_3_5</span><span class="p">:</span>
                <span class="n">args</span><span class="p">[</span><span class="s">&#39;keywords&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">keyword</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">arg</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span><span class="p">[</span><span class="s">&#39;args&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

    <span class="c">#</span>
    <span class="c"># arglist rule had significant changes</span>
    <span class="c">#</span>
    <span class="k">if</span> <span class="n">VER_3_5</span> <span class="o">&lt;=</span> <span class="n">VER_MAJOR_MINOR</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">p_arglist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;arglist : argument comma_opt</span>
<span class="sd">                       | argument comma_argument_list comma_opt</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;args&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s">&#39;keywords&#39;</span><span class="p">:</span> <span class="p">[]}</span>
            <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">p2</span> <span class="o">==</span> <span class="s">&#39;,&#39;</span> <span class="k">else</span> <span class="n">p2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">p2</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c"># Python v3.4</span>
<div class="viewcode-block" id="Parser.p_arglist"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_arglist">[docs]</a>        <span class="k">def</span> <span class="nf">p_arglist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;arglist : argument comma_opt</span>
<span class="sd">                       | argument_comma_list argument comma_opt</span>
<span class="sd">                       | argument_comma_list_opt TIMES test comma_argument_list_opt</span>
<span class="sd">                       | argument_comma_list_opt TIMES test COMMA POW test</span>
<span class="sd">                       | argument_comma_list_opt TIMES test comma_argument_list COMMA POW test</span>
<span class="sd">                       | argument_comma_list_opt POW test</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
            <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;args&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s">&#39;keywords&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s">&#39;starargs&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span> <span class="s">&#39;kwargs&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
            <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">p2</span> <span class="o">!=</span> <span class="s">&#39;**&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">p1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="n">p2</span> <span class="o">==</span> <span class="s">&#39;**&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">p1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">p1</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">ensure_kw</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="n">p0</span><span class="p">[</span><span class="s">&#39;starargs&#39;</span><span class="p">],</span> <span class="n">p4</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">p1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">p1</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">p4</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">p4</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">ensure_kw</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
                <span class="n">p0</span><span class="p">[</span><span class="s">&#39;starargs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">p1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">p1</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">ensure_kw</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
                <span class="n">kwkey</span> <span class="o">=</span> <span class="s">&#39;keywords&#39;</span> <span class="k">if</span> <span class="n">VER_MAJOR_MINOR</span> <span class="o">&gt;=</span> <span class="n">VER_3_5</span> <span class="k">else</span> <span class="s">&#39;kwargs&#39;</span>
                <span class="n">p0</span><span class="p">[</span><span class="s">&#39;starargs&#39;</span><span class="p">],</span> <span class="n">p4</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">p1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">p1</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">p4</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">ensure_kw</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_arg</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="n">ensure_kw</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">False</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
    <span class="k">if</span> <span class="n">VER_MAJOR_MINOR</span> <span class="o">&lt;=</span> <span class="n">VER_3_4</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">p_argument_comma</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;argument_comma : argument COMMA&quot;&quot;&quot;</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>

<div class="viewcode-block" id="Parser.p_comma_argument"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comma_argument">[docs]</a>    <span class="k">def</span> <span class="nf">p_comma_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comma_argument : COMMA argument&quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
</div>
    <span class="nd">@docstring_by_version</span><span class="p">(</span>
        <span class="n">v34</span> <span class="o">=</span> \
        <span class="sd">&quot;&quot;&quot;argument : test</span>
<span class="sd">                    | test comp_for</span>
<span class="sd">                    | test EQUALS test</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
        <span class="n">v35</span> <span class="o">=</span> \
        <span class="sd">&quot;&quot;&quot;argument : test_or_star_expr</span>
<span class="sd">                    | test comp_for</span>
<span class="sd">                    | test EQUALS test</span>
<span class="sd">                    | POW test</span>
<span class="sd">                    | TIMES test</span>
<span class="sd">        &quot;&quot;&quot;</span><span class="p">,</span>
        <span class="p">)</span>
<div class="viewcode-block" id="Parser.p_argument"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_argument">[docs]</a>    <span class="k">def</span> <span class="nf">p_argument</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="c"># v3.4 Notes</span>
        <span class="c"># Really [keyword &#39;=&#39;] test</span>
        <span class="c"># The reason that keywords are test nodes instead of NAME is that using</span>
        <span class="c"># NAME results in an ambiguity.</span>
        <span class="c">#</span>
        <span class="c"># v3.5 Notes</span>
        <span class="c"># &quot;test &#39;=&#39; test&quot; is really &quot;keyword &#39;=&#39; test&quot;, but we have no such token.</span>
        <span class="c"># These need to be in a single rule to avoid grammar that is ambiguous</span>
        <span class="c"># to our LL(1) parser. Even though &#39;test&#39; includes &#39;*expr&#39; in star_expr,</span>
        <span class="c"># we explicitly match &#39;*&#39; here, too, to give it proper precedence.</span>
        <span class="c"># Illegal combinations and orderings are blocked in ast.c:</span>
        <span class="c"># multiple (test comp_for) arguements are blocked; keyword unpackings</span>
        <span class="c"># that precede iterable unpackings are blocked; etc.</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p1</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;**&#39;</span><span class="p">:</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">keyword</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;*&#39;</span><span class="p">:</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Starred</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">GeneratorExp</span><span class="p">(</span><span class="n">elt</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">generators</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s">&#39;comps&#39;</span><span class="p">],</span>
                                      <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">keyword</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_comp_iter"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comp_iter">[docs]</a>    <span class="k">def</span> <span class="nf">p_comp_iter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comp_iter : comp_for</span>
<span class="sd">                     | comp_if</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</div>
<div class="viewcode-block" id="Parser.p_comp_for"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comp_for">[docs]</a>    <span class="k">def</span> <span class="nf">p_comp_for</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comp_for : FOR exprlist IN or_test comp_iter_opt&quot;&quot;&quot;</span>
        <span class="n">targs</span><span class="p">,</span> <span class="n">it</span><span class="p">,</span> <span class="n">p5</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">targs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">targ</span> <span class="o">=</span> <span class="n">targs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">targ</span> <span class="o">=</span> <span class="n">ensure_has_elts</span><span class="p">(</span><span class="n">targs</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                   <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">store_ctx</span><span class="p">(</span><span class="n">targ</span><span class="p">)</span>
        <span class="n">comp</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">comprehension</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">targ</span><span class="p">,</span> <span class="nb">iter</span><span class="o">=</span><span class="n">it</span><span class="p">,</span> <span class="n">ifs</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">comps</span> <span class="o">=</span> <span class="p">[</span><span class="n">comp</span><span class="p">]</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;comps&#39;</span><span class="p">:</span> <span class="n">comps</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">p5</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">comps</span> <span class="o">+=</span> <span class="n">p5</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;comps&#39;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="n">comp</span><span class="o">.</span><span class="n">ifs</span> <span class="o">+=</span> <span class="n">p5</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;if&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_comp_if"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_comp_if">[docs]</a>    <span class="k">def</span> <span class="nf">p_comp_if</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;comp_if : IF test_nocond comp_iter_opt&quot;&quot;&quot;</span>
        <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;if&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">p2</span><span class="p">]}</span>
        <span class="k">if</span> <span class="n">p3</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span><span class="p">[</span><span class="s">&#39;comps&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">p3</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;comps&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_yield_expr"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_yield_expr">[docs]</a>    <span class="k">def</span> <span class="nf">p_yield_expr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;yield_expr : YIELD yield_arg_opt&quot;&quot;&quot;</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">p2</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Yield</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p2</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">p2</span><span class="p">[</span><span class="s">&#39;from&#39;</span><span class="p">]:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">YieldFrom</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="s">&#39;val&#39;</span><span class="p">],</span>
                               <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                               <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Yield</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p2</span><span class="p">[</span><span class="s">&#39;val&#39;</span><span class="p">],</span>
                           <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                           <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_yield_arg"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_yield_arg">[docs]</a>    <span class="k">def</span> <span class="nf">p_yield_arg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;yield_arg : FROM test</span>
<span class="sd">                     | testlist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;from&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">&#39;val&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;from&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="s">&#39;val&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]}</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>

    <span class="c">#</span>
    <span class="c"># subprocess</span>
    <span class="c">#</span>
</div>
    <span class="k">def</span> <span class="nf">_dollar_rules</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;These handle the special xonsh $ shell atoms by looking up</span>
<span class="sd">        in a special __xonsh_env__ dictionary injected in the __builtin__.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">col</span>
        <span class="n">lineno</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>  <span class="c"># $NAME</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_envvar_by_name</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;${&#39;</span><span class="p">:</span>
            <span class="n">xenv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xenv</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p2</span><span class="p">)</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Subscript</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">xenv</span><span class="p">,</span>
                               <span class="nb">slice</span><span class="o">=</span><span class="n">idx</span><span class="p">,</span>
                               <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                               <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                               <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;$(&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">xonsh_call</span><span class="p">(</span><span class="s">&#39;__xonsh_subproc_captured__&#39;</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;$[&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">xonsh_call</span><span class="p">(</span><span class="s">&#39;__xonsh_subproc_uncaptured__&#39;</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="n">p0</span>

    <span class="k">def</span> <span class="nf">_xenv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a new xonsh env reference.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">ast</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s">&#39;__xonsh_env__&#39;</span><span class="p">,</span>
                        <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                        <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                        <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_envvar_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Looks up a xonsh variable by name.&quot;&quot;&quot;</span>
        <span class="n">xenv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xenv</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Str</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">var</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ast</span><span class="o">.</span><span class="n">Subscript</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">xenv</span><span class="p">,</span>
                             <span class="nb">slice</span><span class="o">=</span><span class="n">idx</span><span class="p">,</span>
                             <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                             <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                             <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_subproc_cliargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates an expression for subprocess CLI arguments.&quot;&quot;&quot;</span>
        <span class="n">cliargs</span> <span class="o">=</span> <span class="n">currlist</span> <span class="o">=</span> <span class="n">empty_list</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">action</span> <span class="o">=</span> <span class="n">arg</span><span class="o">.</span><span class="n">_cliarg_action</span>
            <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s">&#39;append&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">currlist</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">currlist</span> <span class="o">=</span> <span class="n">empty_list</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
                    <span class="n">cliargs</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="n">cliargs</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Add</span><span class="p">(),</span> <span class="n">currlist</span><span class="p">,</span>
                                    <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                                    <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
                <span class="n">currlist</span><span class="o">.</span><span class="n">elts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">&#39;extend&#39;</span><span class="p">:</span>
                <span class="n">cliargs</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="n">cliargs</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Add</span><span class="p">(),</span> <span class="n">arg</span><span class="p">,</span>
                                <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span>
                                <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
                <span class="n">currlist</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">&#39;splitlines&#39;</span><span class="p">:</span>
                <span class="n">sl</span> <span class="o">=</span> <span class="n">call_split_lines</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
                <span class="n">cliargs</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="n">cliargs</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Add</span><span class="p">(),</span> <span class="n">sl</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
                <span class="n">currlist</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="s">&#39;ensure_list&#39;</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">ensure_list_from_str_or_list</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
                <span class="n">cliargs</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="n">cliargs</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Add</span><span class="p">(),</span> <span class="n">x</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
                <span class="n">currlist</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;action not understood: &quot;</span> <span class="o">+</span> <span class="n">action</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">arg</span><span class="o">.</span><span class="n">_cliarg_action</span>
        <span class="k">return</span> <span class="n">cliargs</span>

<div class="viewcode-block" id="Parser.p_pipe"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_pipe">[docs]</a>    <span class="k">def</span> <span class="nf">p_pipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;pipe : PIPE</span>
<span class="sd">                | WS PIPE</span>
<span class="sd">                | PIPE WS</span>
<span class="sd">                | WS PIPE WS</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Str</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="Parser.p_subproc"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_subproc">[docs]</a>    <span class="k">def</span> <span class="nf">p_subproc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;subproc : subproc_atoms</span>
<span class="sd">                   | subproc_atoms WS</span>
<span class="sd">                   | subproc AMPERSAND</span>
<span class="sd">                   | subproc pipe subproc_atoms</span>
<span class="sd">                   | subproc pipe subproc_atoms WS</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lineno</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span>
        <span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">col</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_subproc_cliargs</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;&amp;&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">+</span> <span class="p">[</span><span class="n">ast</span><span class="o">.</span><span class="n">Str</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="n">col</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_subproc_cliargs</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="s">&#39;s&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">p1</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">s</span> <span class="o">!=</span> <span class="s">&#39;|&#39;</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s">&#39;additional redirect following non-pipe redirect&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_error</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currloc</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">col</span><span class="p">))</span>
            <span class="n">cliargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subproc_cliargs</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">lineno</span><span class="o">=</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="n">col</span><span class="p">)</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">+</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">cliargs</span><span class="p">]</span>
        <span class="c"># return arguments list</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_subproc_atoms"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_subproc_atoms">[docs]</a>    <span class="k">def</span> <span class="nf">p_subproc_atoms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;subproc_atoms : subproc_atom</span>
<span class="sd">                         | subproc_atoms WS subproc_atom</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="p">[</span><span class="n">p1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p1</span>
</div>
<div class="viewcode-block" id="Parser.p_subproc_atom"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_subproc_atom">[docs]</a>    <span class="k">def</span> <span class="nf">p_subproc_atom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;subproc_atom : subproc_arg</span>
<span class="sd">                        | string_literal</span>
<span class="sd">                        | REGEXPATH</span>
<span class="sd">                        | DOLLAR_NAME</span>
<span class="sd">                        | GT</span>
<span class="sd">                        | LT</span>
<span class="sd">                        | RSHIFT</span>
<span class="sd">                        | IOREDIRECT</span>
<span class="sd">                        | AT_LPAREN test RPAREN</span>
<span class="sd">                        | DOLLAR_LBRACE test RBRACE</span>
<span class="sd">                        | DOLLAR_LPAREN subproc RPAREN</span>
<span class="sd">                        | DOLLAR_LBRACKET subproc RBRACKET</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lenp</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lenp</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Str</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="n">p1</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
                <span class="n">bt</span> <span class="o">=</span> <span class="s">&#39;`&#39;</span>
                <span class="k">if</span> <span class="n">p1</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">bt</span><span class="p">)</span> <span class="ow">and</span> <span class="n">p1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">bt</span><span class="p">):</span>
                    <span class="n">p0</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="n">p1</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="n">bt</span><span class="p">)</span>
                    <span class="n">p0</span> <span class="o">=</span> <span class="n">xonsh_regexpath</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
                    <span class="n">p0</span><span class="o">.</span><span class="n">_cliarg_action</span> <span class="o">=</span> <span class="s">&#39;extend&#39;</span>
                <span class="k">elif</span> <span class="s">&#39;*&#39;</span> <span class="ow">in</span> <span class="n">p1</span><span class="p">:</span>
                    <span class="n">p0</span> <span class="o">=</span> <span class="n">xonsh_call</span><span class="p">(</span><span class="s">&#39;__xonsh_glob__&#39;</span><span class="p">,</span>
                                    <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">p0</span><span class="p">],</span>
                                    <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                    <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
                    <span class="n">p0</span><span class="o">.</span><span class="n">_cliarg_action</span> <span class="o">=</span> <span class="s">&#39;extend&#39;</span>
                <span class="k">elif</span> <span class="n">p1</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;$&#39;</span><span class="p">):</span>
                    <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_envvar_by_name</span><span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                                              <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                              <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
                    <span class="n">p0</span> <span class="o">=</span> <span class="n">xonsh_call</span><span class="p">(</span><span class="s">&#39;__xonsh_ensure_list_of_strs__&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">p0</span><span class="p">],</span>
                                    <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                    <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
                    <span class="n">p0</span><span class="o">.</span><span class="n">_cliarg_action</span> <span class="o">=</span> <span class="s">&#39;extend&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">p0</span> <span class="o">=</span> <span class="n">xonsh_call</span><span class="p">(</span><span class="s">&#39;__xonsh_expand_path__&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">p0</span><span class="p">],</span>
                                    <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
                    <span class="n">p0</span><span class="o">.</span><span class="n">_cliarg_action</span> <span class="o">=</span> <span class="s">&#39;append&#39;</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">Str</span><span class="p">):</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">xonsh_call</span><span class="p">(</span><span class="s">&#39;__xonsh_expand_path__&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">p1</span><span class="p">],</span>
                                <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
                <span class="n">p0</span><span class="o">.</span><span class="n">_cliarg_action</span> <span class="o">=</span> <span class="s">&#39;append&#39;</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AST</span><span class="p">):</span>
                <span class="n">p0</span> <span class="o">=</span> <span class="n">p1</span>
                <span class="n">p0</span><span class="o">.</span><span class="n">_cliarg_action</span> <span class="o">=</span> <span class="s">&#39;append&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="bp">False</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;@(&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">xonsh_call</span><span class="p">(</span><span class="s">&#39;__xonsh_ensure_list_of_strs__&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">_cliarg_action</span> <span class="o">=</span> <span class="s">&#39;extend&#39;</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;${&#39;</span><span class="p">:</span>
            <span class="n">xenv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xenv</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">ast</span><span class="o">.</span><span class="n">Subscript</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">xenv</span><span class="p">,</span>
                               <span class="nb">slice</span><span class="o">=</span><span class="n">idx</span><span class="p">,</span>
                               <span class="n">ctx</span><span class="o">=</span><span class="n">ast</span><span class="o">.</span><span class="n">Load</span><span class="p">(),</span>
                               <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                               <span class="n">col_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">_cliarg_action</span> <span class="o">=</span> <span class="s">&#39;append&#39;</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;$(&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">xonsh_call</span><span class="p">(</span><span class="s">&#39;__xonsh_subproc_captured__&#39;</span><span class="p">,</span>
                            <span class="n">args</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">_cliarg_action</span> <span class="o">=</span> <span class="s">&#39;splitlines&#39;</span>
        <span class="k">elif</span> <span class="n">p1</span> <span class="o">==</span> <span class="s">&#39;$[&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">xonsh_call</span><span class="p">(</span><span class="s">&#39;__xonsh_subproc_uncaptured__&#39;</span><span class="p">,</span>
                            <span class="n">args</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                            <span class="n">lineno</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                            <span class="n">col</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">col</span><span class="p">)</span>
            <span class="n">p0</span><span class="o">.</span><span class="n">_cliarg_action</span> <span class="o">=</span> <span class="s">&#39;splitlines&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="bp">False</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_subproc_arg"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_subproc_arg">[docs]</a>    <span class="k">def</span> <span class="nf">p_subproc_arg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;subproc_arg : subproc_arg_part</span>
<span class="sd">                       | subproc_arg subproc_arg_part</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># This glues the string together after parsing</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p0</span>
</div>
<div class="viewcode-block" id="Parser.p_subproc_arg_part"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_subproc_arg_part">[docs]</a>    <span class="k">def</span> <span class="nf">p_subproc_arg_part</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;subproc_arg_part : NAME</span>
<span class="sd">                            | TILDE</span>
<span class="sd">                            | PERIOD</span>
<span class="sd">                            | DIVIDE</span>
<span class="sd">                            | MINUS</span>
<span class="sd">                            | PLUS</span>
<span class="sd">                            | COLON</span>
<span class="sd">                            | AT</span>
<span class="sd">                            | EQUALS</span>
<span class="sd">                            | TIMES</span>
<span class="sd">                            | POW</span>
<span class="sd">                            | MOD</span>
<span class="sd">                            | XOR</span>
<span class="sd">                            | DOUBLEDIV</span>
<span class="sd">                            | ELLIPSIS</span>
<span class="sd">                            | NONE</span>
<span class="sd">                            | TRUE</span>
<span class="sd">                            | FALSE</span>
<span class="sd">                            | NUMBER</span>
<span class="sd">                            | STRING</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Many tokens cannot be part of this list, such as $, &#39;, &quot;, ()</span>
        <span class="c"># Use a string atom instead.</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="c">#</span>
    <span class="c"># Helpers</span>
    <span class="c">#</span>
</div>
<div class="viewcode-block" id="Parser.p_empty"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_empty">[docs]</a>    <span class="k">def</span> <span class="nf">p_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="s">&#39;empty : &#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="Parser.p_error"><a class="viewcode-back" href="../../api/parser.html#xonsh.parser.Parser.p_error">[docs]</a>    <span class="k">def</span> <span class="nf">p_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parse_error</span><span class="p">(</span><span class="s">&#39;no further code&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">p</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s">&#39;ERRORTOKEN&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="ne">BaseException</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">p</span><span class="o">.</span><span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_error</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currloc</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                                        <span class="n">column</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">lexpos</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s">&#39;code: {0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parse_error</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currloc</span><span class="p">(</span><span class="n">lineno</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                                                <span class="n">column</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">lexpos</span><span class="p">))</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="../../index.html" title="index">
          <img class="logo" src="../../_static/ascii_conch_part_color_tight.png" alt="Logo"/>
        </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
    <li><a href="../../index.html">xonsh 0.2.3 documentation</a> &raquo;</li>

          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Anthony Scopatz.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>